[
  {
    "objectID": "supplemental/S2_its.html",
    "href": "supplemental/S2_its.html",
    "title": "Individual Tree Detection & Segmentation",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "supplemental/S2_its.html#relevant-resources",
    "href": "supplemental/S2_its.html#relevant-resources",
    "title": "Individual Tree Detection & Segmentation",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "supplemental/S2_its.html#overview",
    "href": "supplemental/S2_its.html#overview",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Overview",
    "text": "Overview\nThis code demonstrates individual tree segmentation (ITS) using LiDAR data. It covers CHM-based and point cloud-based methods for tree detection and segmentation. The code also shows how to extract metrics at the tree level and visualize them."
  },
  {
    "objectID": "supplemental/S2_its.html#environment",
    "href": "supplemental/S2_its.html#environment",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# REQUIRE AND INSTALL\n\"concaveman\"\n#&gt; [1] \"concaveman\"\n\n\n# Load packages\nlibrary(lidR)\nlibrary(sf)\nlibrary(terra)\n\n# Read in LiDAR file and set some color palettes\nlas &lt;- readLAS(\"data/zrh_norm.laz\")\ncol &lt;- height.colors(50)\ncol1 &lt;- pastel.colors(900)"
  },
  {
    "objectID": "supplemental/S2_its.html#chm-based-methods",
    "href": "supplemental/S2_its.html#chm-based-methods",
    "title": "Individual Tree Detection & Segmentation",
    "section": "CHM based methods",
    "text": "CHM based methods\nWe start by creating a Canopy Height Model (CHM) from the LiDAR data. The rasterize_canopy() function generates the CHM using a specified resolution (res) and a chosen algorithm, here p2r(0.15), to compute the percentiles.\n\n# Generate CHM\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = p2r(0.15))\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nAfter building the CHM, we visualize it using a color palette (col)."
  },
  {
    "objectID": "supplemental/S2_its.html#optionally-smooth-the-chm",
    "href": "supplemental/S2_its.html#optionally-smooth-the-chm",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Optionally smooth the CHM",
    "text": "Optionally smooth the CHM\nOptionally, we can smooth the CHM using a kernel to remove small-scale variations and enhance larger features like tree canopies.\n\n# Generate kernel and smooth chm\nkernel &lt;- matrix(1, 3, 3)\nschm &lt;- terra::focal(x = chm, w = kernel, fun = median, na.rm = TRUE)\nplot(schm, col = col)\n\n\n\n\n\n\n\n\nHere, we smooth the CHM using a median filter with a 3x3 kernel. The smoothed CHM (schm) is visualized using a color palette to represent height values."
  },
  {
    "objectID": "supplemental/S2_its.html#tree-detection",
    "href": "supplemental/S2_its.html#tree-detection",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Tree detection",
    "text": "Tree detection\nNext, we detect tree tops using the smoothed CHM. The locate_trees() function identifies tree tops based on local maxima.\n\n# Detect trees\nttops &lt;- locate_trees(las = schm, algorithm = lmf(ws = 2.5))\nttops\n#&gt; Simple feature collection with 2695 features and 2 fields\n#&gt; Attribute-geometry relationships: constant (2)\n#&gt; Geometry type: POINT\n#&gt; Dimension:     XYZ\n#&gt; Bounding box:  xmin: 2670505 ymin: 1258734 xmax: 2670755 ymax: 1258984\n#&gt; Projected CRS: CH1903+ / LV95\n#&gt; First 10 features:\n#&gt;    treeID      Z                       geometry\n#&gt; 1       1 37.080 POINT Z (2670514 1258984 37...\n#&gt; 2       2 38.230 POINT Z (2670534 1258984 38...\n#&gt; 3       3 41.185 POINT Z (2670555 1258984 41...\n#&gt; 4       4  3.915 POINT Z (2670578 1258984 3....\n#&gt; 5       5  6.090 POINT Z (2670591 1258984 6.09)\n#&gt; 6       6 37.885 POINT Z (2670597 1258984 37...\n#&gt; 7       7 46.160 POINT Z (2670614 1258984 46...\n#&gt; 8       8 46.645 POINT Z (2670617 1258984 46...\n#&gt; 9       9  9.170 POINT Z (2670652 1258984 9.17)\n#&gt; 10     10  3.075 POINT Z (2670687 1258984 3....\nplot(chm, col = col)\nplot(ttops, col = \"black\", add = TRUE, cex = 0.5)\n\n\n\n\n\n\n\n\nThe detected tree tops (ttops) are plotted on top of the CHM (chm) to visualize their positions."
  },
  {
    "objectID": "supplemental/S2_its.html#segmentation",
    "href": "supplemental/S2_its.html#segmentation",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Segmentation",
    "text": "Segmentation\nNow, we perform tree segmentation using the detected tree tops. The segment_trees() function segments the trees in the LiDAR point cloud based on the previously detected tree tops.\n# Segment trees using dalponte\nlas &lt;- segment_trees(las = las, algorithm = dalponte2016(chm = schm, treetops = ttops))\n\n# Count number of trees detected and segmented\nlength(unique(las$treeID) |&gt; na.omit())\n#&gt; [1] 2654\n\n# Visualize all trees\nplot(las, color = \"treeID\")\n\n\n\n\n\n\n\n\n\n\n# Select trees by ID\ntree25 &lt;- filter_poi(las = las, treeID == 25)\ntree125 &lt;- filter_poi(las = las, treeID == 125)\n\nplot(tree25, size = 4)\n\n\n\n\n\n\n\n\n\nplot(tree125, size = 3)\n\n\n\n\n\n\n\n\n\nAfter segmentation, we count the number of trees detected and visualize all the trees in the point cloud. We then select two trees (tree25 and tree125) and visualize them individually.\n\n\n\n\n\n\nVariability and testing\n\n\n\nForests are highly variable! This means that some algorithms and parameters will work better than others depending on the data you have. Play around with algorithms and see which works best for your data."
  },
  {
    "objectID": "supplemental/S2_its.html#working-with-rasters",
    "href": "supplemental/S2_its.html#working-with-rasters",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Working with rasters",
    "text": "Working with rasters\nThe lidR package is designed for point clouds, but some functions can be applied to raster data as well. Here, we show how to extract trees from the CHM without using the point cloud directly.\n\n# Generate rasterized delineation\ntrees &lt;- dalponte2016(chm = chm, treetops = ttops)() # Notice the parenthesis at the end\ntrees\n#&gt; class       : SpatRaster \n#&gt; size        : 501, 501, 1  (nrow, ncol, nlyr)\n#&gt; resolution  : 0.5, 0.5  (x, y)\n#&gt; extent      : 2670505, 2670756, 1258734, 1258985  (xmin, xmax, ymin, ymax)\n#&gt; coord. ref. : CH1903+ / LV95 (EPSG:2056) \n#&gt; source(s)   : memory\n#&gt; name        :    Z \n#&gt; min value   :    1 \n#&gt; max value   : 2695\n\nplot(trees, col = col1)\nplot(ttops, add = TRUE, cex = 0.5)\n#&gt; Warning in plot.sf(ttops, add = TRUE, cex = 0.5): ignoring all but the first\n#&gt; attribute\n\n\n\n\n\n\n\n\nWe create tree objects (trees) using the dalponte2016 algorithm with the CHM and tree tops. The resulting objects are visualized alongside the detected tree tops."
  },
  {
    "objectID": "supplemental/S2_its.html#tree-detection-1",
    "href": "supplemental/S2_its.html#tree-detection-1",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Tree detection",
    "text": "Tree detection\nWe begin with tree detection using the local maxima filtering (lmf) algorithm. This approach directly works with the LiDAR point cloud to detect tree tops.\n\n# Detect trees\nttops &lt;- locate_trees(las = las, algorithm = lmf(ws = 3, hmin = 5))\n\n# Visualize\nx &lt;- plot(las)\nadd_treetops3d(x = x, ttops = ttops, radius = 0.5)\n\n\n\n\n\n\n\n\n\nWe detect tree tops using the lmf algorithm and visualize them in 3D by adding the tree tops to the LiDAR plot."
  },
  {
    "objectID": "supplemental/S2_its.html#tree-segmentation",
    "href": "supplemental/S2_its.html#tree-segmentation",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Tree segmentation",
    "text": "Tree segmentation\nNext, we perform tree segmentation using the li2012 algorithm, which directly processes the LiDAR point cloud.\n# Segment using li\nlas &lt;- segment_trees(las = las, algorithm = li2012())\nplot(las, color = \"treeID\")\n# This algorithm does not seem pertinent for this dataset.\n\n\n\n\n\n\n\n\n\nThe li2012 algorithm segments the trees in the LiDAR point cloud based on local neighborhood information. However, it may not be optimal for this specific dataset."
  },
  {
    "objectID": "supplemental/S2_its.html#using-crown_metrics",
    "href": "supplemental/S2_its.html#using-crown_metrics",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Using crown_metrics()",
    "text": "Using crown_metrics()\nThe crown_metrics() function extracts metrics from the segmented trees using a user-defined function. We use the length of the Z coordinate to obtain the tree height as an example.\n\n# Generate metrics for each delineated crown\nmetrics &lt;- crown_metrics(las = las, func = ~list(n = length(Z)))\nmetrics\n#&gt; Simple feature collection with 2018 features and 2 fields\n#&gt; Geometry type: POINT\n#&gt; Dimension:     XYZ\n#&gt; Bounding box:  xmin: 2670505 ymin: 1258734 xmax: 2670755 ymax: 1258984\n#&gt; z_range:       zmin: 2.02 zmax: 48.31\n#&gt; Projected CRS: CH1903+ / LV95\n#&gt; First 10 features:\n#&gt;    treeID    n                       geometry\n#&gt; 1       1 1140 POINT Z (2670616 1258984 48...\n#&gt; 2       2 3404 POINT Z (2670625 1258975 47...\n#&gt; 3       3 1748 POINT Z (2670634 1258983 46...\n#&gt; 4       4 1579 POINT Z (2670642 1258975 46...\n#&gt; 5       5 2533 POINT Z (2670626 1258904 46...\n#&gt; 6       6 1573 POINT Z (2670647 1258978 45...\n#&gt; 7       7 1922 POINT Z (2670591 1258771 45.3)\n#&gt; 8       8 5630 POINT Z (2670642 1258953 45...\n#&gt; 9       9 1578 POINT Z (2670556 1258741 44...\n#&gt; 10     10 1283 POINT Z (2670652 1258949 44...\nplot(metrics[\"n\"], cex = 0.8)\n\n\n\n\n\n\n\n\nWe calculate the number of points (n) in each tree crown using a user-defined function, and then visualize the results."
  },
  {
    "objectID": "supplemental/S2_its.html#applying-user-defined-functions",
    "href": "supplemental/S2_its.html#applying-user-defined-functions",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Applying user-defined functions",
    "text": "Applying user-defined functions\nWe can map any user-defined function at the tree level using the crown_metrics() function, just like pixel_metrics(). Here, we calculate the convex hull area of each tree using a custom function f() and then visualize the results.\n\n# User defined function for area calculation\nf &lt;- function(x, y) {\n  # Get xy for tree\n  coords &lt;- cbind(x, y)\n  \n  # Convex hull\n  ch &lt;- chull(coords)\n  \n  # Close coordinates\n  ch &lt;- c(ch, ch[1])\n  ch_coords &lt;- coords[ch, ]\n  \n  # Generate polygon\n  p &lt;- sf::st_polygon(list(ch_coords))\n  \n  #calculate area\n  area &lt;- sf::st_area(p)\n\n  return(list(A = area))\n}\n\n# Apply user-defined function\nmetrics &lt;- crown_metrics(las = las, func = ~f(X, Y))\nmetrics\n#&gt; Simple feature collection with 2018 features and 2 fields\n#&gt; Geometry type: POINT\n#&gt; Dimension:     XYZ\n#&gt; Bounding box:  xmin: 2670505 ymin: 1258734 xmax: 2670755 ymax: 1258984\n#&gt; z_range:       zmin: 2.02 zmax: 48.31\n#&gt; Projected CRS: CH1903+ / LV95\n#&gt; First 10 features:\n#&gt;    treeID         A                       geometry\n#&gt; 1       1 117.07885 POINT Z (2670616 1258984 48...\n#&gt; 2       2 225.63075 POINT Z (2670625 1258975 47...\n#&gt; 3       3 152.64110 POINT Z (2670634 1258983 46...\n#&gt; 4       4  92.06825 POINT Z (2670642 1258975 46...\n#&gt; 5       5 112.30745 POINT Z (2670626 1258904 46...\n#&gt; 6       6  78.93495 POINT Z (2670647 1258978 45...\n#&gt; 7       7 153.69045 POINT Z (2670591 1258771 45.3)\n#&gt; 8       8 305.83890 POINT Z (2670642 1258953 45...\n#&gt; 9       9 104.63505 POINT Z (2670556 1258741 44...\n#&gt; 10     10 166.12705 POINT Z (2670652 1258949 44...\nplot(metrics[\"A\"], cex = 0.8)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3rd party metric packages\n\n\n\nRemember that you can use 3rd party packages like lidRmetrics for crown metrics too!"
  },
  {
    "objectID": "supplemental/S2_its.html#using-pre-defined-metrics",
    "href": "supplemental/S2_its.html#using-pre-defined-metrics",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Using pre-defined metrics",
    "text": "Using pre-defined metrics\nSome metrics are already recorded, and we can directly calculate them at the tree level using crown_metrics().\n\nmetrics &lt;- crown_metrics(las = las, func = .stdtreemetrics)\nmetrics\n#&gt; Simple feature collection with 2018 features and 4 fields\n#&gt; Geometry type: POINT\n#&gt; Dimension:     XYZ\n#&gt; Bounding box:  xmin: 2670505 ymin: 1258734 xmax: 2670755 ymax: 1258984\n#&gt; z_range:       zmin: 2.02 zmax: 48.31\n#&gt; Projected CRS: CH1903+ / LV95\n#&gt; First 10 features:\n#&gt;    treeID     Z npoints convhull_area                       geometry\n#&gt; 1       1 48.31    1140       117.079 POINT Z (2670616 1258984 48...\n#&gt; 2       2 47.43    3404       225.631 POINT Z (2670625 1258975 47...\n#&gt; 3       3 46.56    1748       152.641 POINT Z (2670634 1258983 46...\n#&gt; 4       4 46.46    1579        92.068 POINT Z (2670642 1258975 46...\n#&gt; 5       5 46.01    2533       112.307 POINT Z (2670626 1258904 46...\n#&gt; 6       6 45.93    1573        78.935 POINT Z (2670647 1258978 45...\n#&gt; 7       7 45.30    1922       153.690 POINT Z (2670591 1258771 45.3)\n#&gt; 8       8 45.27    5630       305.839 POINT Z (2670642 1258953 45...\n#&gt; 9       9 44.81    1578       104.635 POINT Z (2670556 1258741 44...\n#&gt; 10     10 44.81    1283       166.127 POINT Z (2670652 1258949 44...\n\n# Visualize individual metrics\nplot(x = metrics[\"convhull_area\"], cex = 0.8)\n\n\n\n\n\n\n\nplot(x = metrics[\"Z\"], cex = 0.8)\n\n\n\n\n\n\n\n\nWe calculate tree-level metrics using .stdtreemetrics and visualize individual metrics like convex hull area and height."
  },
  {
    "objectID": "supplemental/S2_its.html#delineating-crowns",
    "href": "supplemental/S2_its.html#delineating-crowns",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Delineating crowns",
    "text": "Delineating crowns\nThe crown_metrics() function segments trees and extracts metrics at the crown level.\n\ncvx_hulls &lt;- crown_metrics(las = las, func = .stdtreemetrics, geom = 'convex')\ncvx_hulls\n#&gt; Simple feature collection with 2018 features and 4 fields\n#&gt; Geometry type: POLYGON\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 2670505 ymin: 1258734 xmax: 2670755 ymax: 1258984\n#&gt; Projected CRS: CH1903+ / LV95\n#&gt; First 10 features:\n#&gt;    treeID     Z npoints convhull_area                       geometry\n#&gt; 1       1 48.31    1140       117.079 POLYGON ((2670624 1258979, ...\n#&gt; 2       2 47.43    3404       225.631 POLYGON ((2670635 1258974, ...\n#&gt; 3       3 46.56    1748       152.641 POLYGON ((2670643 1258978, ...\n#&gt; 4       4 46.46    1579        92.068 POLYGON ((2670646 1258971, ...\n#&gt; 5       5 46.01    2533       112.307 POLYGON ((2670636 1258903, ...\n#&gt; 6       6 45.93    1573        78.935 POLYGON ((2670652 1258975, ...\n#&gt; 7       7 45.30    1922       153.690 POLYGON ((2670596 1258764, ...\n#&gt; 8       8 45.27    5630       305.839 POLYGON ((2670652 1258954, ...\n#&gt; 9       9 44.81    1578       104.635 POLYGON ((2670558 1258738, ...\n#&gt; 10     10 44.81    1283       166.127 POLYGON ((2670655 1258944, ...\n\nplot(cvx_hulls)\nplot(ttops, add = TRUE, cex = 0.5)\n#&gt; Warning in plot.sf(ttops, add = TRUE, cex = 0.5): ignoring all but the first\n#&gt; attribute\n\n\n\n\n\n\n\n\n# Visualize individual metrics based on values\nplot(x = cvx_hulls[\"convhull_area\"])\n\n\n\n\n\n\n\nplot(x = cvx_hulls[\"Z\"])\n\n\n\n\n\n\n\n\nWe use crown_metrics() with .stdtreemetrics to segment trees and extract metrics based on crown delineation."
  },
  {
    "objectID": "supplemental/S2_its.html#itd-using-lascatalog",
    "href": "supplemental/S2_its.html#itd-using-lascatalog",
    "title": "Individual Tree Detection & Segmentation",
    "section": "ITD using LAScatalog",
    "text": "ITD using LAScatalog\nIn this section, we explore Individual Tree Detection (ITD) using the LAScatalog. We first configure catalog options for ITD.\n\n# Load catalog\nctg &lt;- catalog('data/ctg_norm')\n\n# Set catalog options\nopt_filter(ctg) &lt;- \"-drop_z_below 0 -drop_z_above 50\"\nopt_select(ctg) &lt;- \"xyz\"\nopt_chunk_size(ctg) &lt;- 500\nopt_chunk_buffer(ctg) &lt;- 10\nopt_progress(ctg) &lt;- TRUE\n\n# Explicitly tell R to use the is.empty function from the lidR package - avoid terra error\nis.empty &lt;- lidR::is.empty\n\n# Detect treetops and plot\nttops &lt;- locate_trees(las = ctg, algorithm = lmf(ws = 3, hmin = 10))\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 12s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 13s     \n[========&gt;                                         ] 17% ETA: 14s     \n[========&gt;                                         ] 17% ETA: 14s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[===&gt;                                              ] 6% ETA: 27s     \n[===&gt;                                              ] 6% ETA: 27s     \n[===&gt;                                              ] 6% ETA: 27s     \n[===&gt;                                              ] 6% ETA: 27s     \n[===&gt;                                              ] 6% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 25s     \n[===&gt;                                              ] 7% ETA: 25s     \n[===&gt;                                              ] 7% ETA: 25s     \n[===&gt;                                              ] 7% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[======&gt;                                           ] 12% ETA: 24s     \n[======&gt;                                           ] 12% ETA: 24s     \n[======&gt;                                           ] 12% ETA: 24s     \n[======&gt;                                           ] 12% ETA: 25s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 15s     \n[=======&gt;                                          ] 15% ETA: 15s     \n[=======&gt;                                          ] 15% ETA: 15s     \n[=======&gt;                                          ] 15% ETA: 15s     \n[=======&gt;                                          ] 15% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 16s     \n[========&gt;                                         ] 17% ETA: 16s     \n[========&gt;                                         ] 17% ETA: 15s     \n[========&gt;                                         ] 17% ETA: 15s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 11s     \n[========&gt;                                         ] 17% ETA: 12s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n                                                                                \nchm &lt;- rasterize_canopy(ctg, algorithm = p2r(), res = 1)\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[===========&gt;                                      ] 22% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 14% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 13s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 14s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[========&gt;                                         ] 17% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 18% ETA: 10s     \n[=========&gt;                                        ] 19% ETA: 10s     \n[=========&gt;                                        ] 19% ETA: 10s     \n[=========&gt;                                        ] 19% ETA: 10s     \n[=========&gt;                                        ] 19% ETA: 10s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[=========&gt;                                        ] 19% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 20% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[==========&gt;                                       ] 21% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 9s     \n[===========&gt;                                      ] 22% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[===========&gt;                                      ] 23% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 24% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 16s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 6% ETA: 28s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 27s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[===&gt;                                              ] 7% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[=====&gt;                                            ] 10% ETA: 24s     \n[=====&gt;                                            ] 10% ETA: 24s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 24s     \n[=====&gt;                                            ] 11% ETA: 25s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[===&gt;                                              ] 7% ETA: 24s     \n[===&gt;                                              ] 7% ETA: 24s     \n[===&gt;                                              ] 7% ETA: 23s     \n[===&gt;                                              ] 7% ETA: 23s     \n[===&gt;                                              ] 7% ETA: 23s     \n[===&gt;                                              ] 7% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 23s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[====&gt;                                             ] 9% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 10% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 19s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[=======&gt;                                          ] 15% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 17s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 14% ETA: 12s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 20% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[==========&gt;                                       ] 21% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 22% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[===========&gt;                                      ] 23% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 24% ETA: 7s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nplot(chm)\nplot(ttops, add = TRUE, cex = 0.1, col = \"red\")"
  },
  {
    "objectID": "supplemental/S2_its.html#conclusion",
    "href": "supplemental/S2_its.html#conclusion",
    "title": "Individual Tree Detection & Segmentation",
    "section": "Conclusion",
    "text": "Conclusion\nThis concludes the tutorial on various methods for tree detection, segmentation, and extraction of metrics using the lidR package in R."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "",
    "text": "Presenters:\nLiam Irwin (UBC)\nBrent Murray (UBC)"
  },
  {
    "objectID": "index.html#people",
    "href": "index.html#people",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "",
    "text": "Presenters:\nLiam Irwin (UBC)\nBrent Murray (UBC)"
  },
  {
    "objectID": "index.html#materials",
    "href": "index.html#materials",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Materials",
    "text": "Materials\nThis repository contains the material for an 80 minute lidR tutorial workshop. You should install the material on your own machine from this repository. It contains the code and point-clouds we will use. The workshop intends to:\n\nPresent an overview of what can be done with lidR\nGive users an understanding of how lidR may fit their needs\nExercises will be done depending on available time - users are encouraged to work on these after the workshop!\n\n\n\n\n\n\n\nTip\n\n\n\nIntroduction slides: Intro to Airborne LiDAR & lidR\n\n\nDownload the workshop release for code and lidar files ADD LINK"
  },
  {
    "objectID": "index.html#requirements",
    "href": "index.html#requirements",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Requirements",
    "text": "Requirements\n\nR version and Rstudio\n\nYou need to install a recent version of R i.e. R 4.0.x or newer.\nWe will work with Rstudio. This IDE is not mandatory to follow the workshop but is highly recommended.\n\n\n\nR Packages\nYou need to install the lidR package in its latest version (v &gt;= 4.0.0).\ninstall.packages(\"lidR\")\nTo run all code in the tutorial yourself, you will need to install the following packages. You can use lidR without them, however.\nlibs &lt;- c(\"geometry\",\"viridis\",\"future\",\"sf\",\"gstat\",\"terra\",\"mapview\",\"mapedit\")\n\ninstall.packages(libs)\nIn the metrics section we will work with a user-made package that supports lidR with additional functions To follow along with these steps optionally install lidRmetrics from GitHub (not on CRAN)\ndevtools::install_github(\"ptompalski/lidRmetrics\")\n\n\nDatasets\nWe will be working with a sample ALS dataset openly available for Canton Zürich flown in spring 2014.\nThe raw data has been thinned to a uniform density to speed up processing."
  },
  {
    "objectID": "index.html#estimated-schedule",
    "href": "index.html#estimated-schedule",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Estimated schedule",
    "text": "Estimated schedule\n\nIntroduction to Lidar and lidR (09:00)\nReading LAS and LAZ files (09:10)\nPoint Classification and filtering (9:15)\nDigital Terrain Models and Height Normalization (9:25)\nCanopy Height Models (9:35)\nLidar Summary Metrics (9:50)\nFile Collection Processing Engine (10:10)"
  },
  {
    "objectID": "index.html#resources",
    "href": "index.html#resources",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Resources",
    "text": "Resources\nWe strongly recommend having the following resources available to you:\n\nThe lidR official documentation\nThe lidRbook of tutorials\n\nWhen working on exercises:\n\nStack Exchange with the lidR tag"
  },
  {
    "objectID": "index.html#lidr",
    "href": "index.html#lidr",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "lidR",
    "text": "lidR\nlidR is an R package to work with LiDAR data developed at Laval University (Québec, Canada). It was developed & continues to be maintained by Jean-Romain Roussel and was made possible between:\n\n2015 and 2018 thanks to the financial support of the AWARE project NSERC CRDPJ 462973-14; grantee Prof. Nicholas C. Coops.\n2018 and 2021 thanks to the financial support of the Ministère des Forêts, de la Faune et des Parcs (Québec).\n2021 and 2024 thanks to the financial support of Laval University.\n\nThe current release version of lidR can be found on CRAN and source code is hosted on GitHub.\n\n\n\n\n\n\nNote\n\n\n\n\n\nNote\nSince 2024, the lidR package is no longer supported by Laval University, but the software will remain free and open-source. r-lidar has transitioned into a company to ensure sustainability and now offers independent services for training courses, consulting, and development. Please feel free to visit their website for more information."
  },
  {
    "objectID": "index.html#note",
    "href": "index.html#note",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Note",
    "text": "Note\nSince 2024, the lidR package is no longer supported by Laval University, but the software will remain free and open-source. r-lidar has transitioned into a company to ensure sustainability and now offers independent services for training courses, consulting, and development. Please feel free to visit their website for more information."
  },
  {
    "objectID": "06_solutions.html",
    "href": "06_solutions.html",
    "title": "Excercise Solutions",
    "section": "",
    "text": "Code"
  },
  {
    "objectID": "06_solutions.html#resources",
    "href": "06_solutions.html#resources",
    "title": "Excercise Solutions",
    "section": "",
    "text": "Code"
  },
  {
    "objectID": "06_solutions.html#las",
    "href": "06_solutions.html#las",
    "title": "Excercise Solutions",
    "section": "1-LAS",
    "text": "1-LAS\n\n# Load packages\nlibrary(sf)\nlibrary(terra)\nlibrary(lidR)\n\n\nE1.\nWhat are withheld points? Where are they in our pointcloud?\n\n\nCode\n# According to ASPRS LAS specification http://www.asprs.org/wp-content/uploads/2019/07/LAS_1_4_r15.pdf page 18 \"a point # that should not be included in processing (synonymous with Deleted)\"\n\n# They are on the edges. It looks like they correspond to a buffer. LAStools makes use of the withheld bit to flag some # points. Without more information on former processing step it is hard to say.\n\n\n\n\nE2.\nRead the file dropping the withheld points.\n\n\nCode\nlas &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", filter = \"-drop_withheld\")\n\n\nCode\nplot(las)\n\n\n\n\nE3.\nThe withheld points seem to be legitimate points that we want to keep.\nTry to load the file including the withheld points but get rid of the warning (without using suppressWarnings()). Hint: Check available -set_withheld filters in readLAS(filter = \"-h\")\n\n\nCode\nlas &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", filter = \"-set_withheld_flag 0\")\n\n\nCode\nplot(las, color = \"Withheld_flag\")\n\n\n\n\nE4.\nLoad only the ground points and plot the point-cloud coloured by the return number of the point. Do it loading the strict minimal amount of memory (4.7 Mb). Hint: use ?lidR::readLAS and see what select options might help.\n\n\nCode\nlas &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", filter = \"-keep_class 2 -set_withheld_flag 0\", select = \"r\")\n\n\nCode\nplot(las, color = \"ReturnNumber\", legend = T)\nformat(object.size(las), \"Mb\")\n#&gt; [1] \"4.6 Mb\""
  },
  {
    "objectID": "06_solutions.html#roi",
    "href": "06_solutions.html#roi",
    "title": "Excercise Solutions",
    "section": "2-ROI",
    "text": "2-ROI\n\nlas &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", select = \"xyz\") # Re-load \n#&gt; Warning: There are 127471 points flagged 'withheld'.\nplots &lt;- st_read(\"data/shapefiles/MixedEucaNatPlot.shp\")\n#&gt; Reading layer `MixedEucaNatPlot' from data source \n#&gt;   `C:\\Users\\lakirwin\\Documents\\GitHub\\LPS_lidRtutorial\\data\\shapefiles\\MixedEucaNatPlot.shp' \n#&gt;   using driver `ESRI Shapefile'\n#&gt; Simple feature collection with 5 features and 1 field\n#&gt; Geometry type: POINT\n#&gt; Dimension:     XY\n#&gt; Bounding box:  xmin: 203879.6 ymin: 7358932 xmax: 203960.6 ymax: 7359033\n#&gt; Projected CRS: SIRGAS 2000 / UTM zone 23S\nplot(las@header, map = FALSE)\nplot(plots, add = TRUE)\n\n\n\n\n\n\n\n\n\nE1.\nClip the 5 plots with a radius of 11.3 m,\n\n\nCode\ninventory &lt;- clip_roi(las, plots, radius = 11.3)\nplot(inventory[[2]])\n\n\n\n\nE2.\nClip a transect from A c(203850, 7358950) to B c(203950, 7959000).\n\n\nCode\ntr &lt;- clip_transect(las, c(203850, 7358950), c(203950, 7359000), width = 5)\nplot(tr, axis = T)\n\n\n\n\nE3.\nClip a transect from A c(203850, 7358950) to B c(203950, 7959000) but reorient it so it is no longer on the XY diagonal. Hint = ?clip_transect\n\n\nCode\nptr &lt;- clip_transect(las, c(203850, 7358950), c(203950, 7359000), width = 5, xz = TRUE)\nplot(tr, axis = T)\nplot(ptr, axis = T)\nplot(ptr$X, ptr$Z, cex = 0.25, pch = 19, asp = 1)"
  },
  {
    "objectID": "06_solutions.html#aba",
    "href": "06_solutions.html#aba",
    "title": "Excercise Solutions",
    "section": "3-ABA",
    "text": "3-ABA\n\nlas &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", select = \"*\",  filter = \"-set_withheld_flag 0\")\n\n\nE1.\nAssuming that biomass is estimated using the equation B = 0.5 * mean Z + 0.9 * 90th percentile of Z applied on first returns only, map the biomass.\n\n\nCode\nB &lt;- pixel_metrics(las, ~0.5*mean(Z) + 0.9*quantile(Z, probs = 0.9), 10, filter = ~ReturnNumber == 1L)\nplot(B, col = height.colors(50))\n\n\n\n\n\n\n\n\n\nCode\n\nB &lt;- pixel_metrics(las, .stdmetrics_z, 10)\nB &lt;- 0.5*B[[\"zmean\"]] + 0.9*B[[\"zq90\"]]\nplot(B, col = height.colors(50))\n\n\n\n\n\n\n\n\n\nCode\n\npixel_metrics(las, ~as.list(quantile(Z), 10))\n#&gt; class       : SpatRaster \n#&gt; size        : 8, 8, 5  (nrow, ncol, nlyr)\n#&gt; resolution  : 20, 20  (x, y)\n#&gt; extent      : 203820, 203980, 7358900, 7359060  (xmin, xmax, ymin, ymax)\n#&gt; coord. ref. : SIRGAS 2000 / UTM zone 23S (EPSG:31983) \n#&gt; source(s)   : memory\n#&gt; names       : 0%,   25%,   50%,  75%,  100% \n#&gt; min values  :  0,  0.00,  0.00,  0.0,  0.79 \n#&gt; max values  :  0, 12.32, 17.19, 27.4, 34.46\n\n\n\n\nE2.\nMap the density of ground returns at a 5 m resolution with pixel_metrics(filter = ~Classification == LASGROUND).\n\n\nCode\nGND &lt;- pixel_metrics(las, ~length(Z)/25, res = 5, filter = ~Classification == LASGROUND)\nplot(GND, col = heat.colors(50))\n\n\n\n\n\n\n\n\n\n\n\nE3.\nMap pixels that are flat (planar) using stdshapemetrics. These could indicate potential roads.\n\n\nCode\nm &lt;- pixel_metrics(las, .stdshapemetrics, res = 3)\nplot(m[[\"planarity\"]], col = heat.colors(50))\n\n\n\n\n\n\n\n\n\nCode\nflat &lt;- m[[\"planarity\"]] &gt; 0.85\nplot(flat)"
  },
  {
    "objectID": "06_solutions.html#dtm",
    "href": "06_solutions.html#dtm",
    "title": "Excercise Solutions",
    "section": "5-DTM",
    "text": "5-DTM\n\nE1.\nPlot and compare these two normalized point-clouds. Why do they look different? Fix that. Hint: filter.\nSome non ground points are below 0. It can be slightly low noise point not classified as ground by the data provider. This low points not being numerous and dark blue we hardly see them\n\n\nCode\nlas1 &lt;- readLAS(\"data/MixedEucaNat.laz\", filter = \"-set_withheld_flag 0\")\n\n\nCode\nnlas1 &lt;- normalize_height(las1, tin())\nnlas2 &lt;- readLAS(\"data/MixedEucaNat_normalized.laz\", filter = \"-set_withheld_flag 0\")\n\n\nCode\nplot(nlas1)\nplot(nlas2)\n\nnlas1 &lt;- filter_poi(nlas1, Z &gt; -0.1)\nplot(nlas1)\n\n\n\n\nE2.\nClip a plot somewhere in MixedEucaNat.laz (the non-normalized file).\n\n\nCode\ncirc &lt;- clip_circle(las, 203930, 7359000, 25)\nplot(circ)\n\n\n\n\nE3.\nCompute a DTM for this plot. Which method are you choosing and why?\n\n\nCode\ndtm &lt;- rasterize_terrain(circ, 0.5, kriging())\nplot_dtm3d(dtm)\n\n\n\n\nE4.\nCompute a DSM (digital surface model). Hint: Look back to how you made a CHM.\n\n\nCode\ndsm &lt;- rasterize_canopy(circ, 1, p2r(0.1))\nplot(dsm, col = height.colors(50))\n\n\n\n\n\n\n\n\n\n\n\nE5.\nNormalize the plot.\n\n\nCode\nncirc &lt;- circ - dtm\nplot(ncirc)\n\n\n\n\nE6.\nCompute a CHM.\n\n\nCode\nchm &lt;- rasterize_canopy(ncirc, 1, p2r(0.1))\nplot(chm, col = height.colors(50))\n\n\n\n\n\n\n\n\n\n\n\nE7.\nEstimate some metrics of interest in this plot with cloud_metrics().\n\n\nCode\nmetrics &lt;- cloud_metrics(ncirc, .stdmetrics_z)\nmetrics\n#&gt; $zmax\n#&gt; [1] 31.41\n#&gt; \n#&gt; $zmean\n#&gt; [1] 11.11374\n#&gt; \n#&gt; $zsd\n#&gt; [1] 11.44308\n#&gt; \n#&gt; $zskew\n#&gt; [1] 0.4123246\n#&gt; \n#&gt; $zkurt\n#&gt; [1] 1.42725\n#&gt; \n#&gt; $zentropy\n#&gt; [1] NA\n#&gt; \n#&gt; $pzabovezmean\n#&gt; [1] 42.39526\n#&gt; \n#&gt; $pzabove2\n#&gt; [1] 60.61408\n#&gt; \n#&gt; $zq5\n#&gt; [1] 0\n#&gt; \n#&gt; $zq10\n#&gt; [1] 0\n#&gt; \n#&gt; $zq15\n#&gt; [1] 0\n#&gt; \n#&gt; $zq20\n#&gt; [1] 0\n#&gt; \n#&gt; $zq25\n#&gt; [1] 0\n#&gt; \n#&gt; $zq30\n#&gt; [1] 0\n#&gt; \n#&gt; $zq35\n#&gt; [1] 1.18\n#&gt; \n#&gt; $zq40\n#&gt; [1] 2.14\n#&gt; \n#&gt; $zq45\n#&gt; [1] 3.62\n#&gt; \n#&gt; $zq50\n#&gt; [1] 5.25\n#&gt; \n#&gt; $zq55\n#&gt; [1] 8.903\n#&gt; \n#&gt; $zq60\n#&gt; [1] 13.12\n#&gt; \n#&gt; $zq65\n#&gt; [1] 18.32\n#&gt; \n#&gt; $zq70\n#&gt; [1] 22.1\n#&gt; \n#&gt; $zq75\n#&gt; [1] 24.31\n#&gt; \n#&gt; $zq80\n#&gt; [1] 25.62\n#&gt; \n#&gt; $zq85\n#&gt; [1] 26.7\n#&gt; \n#&gt; $zq90\n#&gt; [1] 27.53\n#&gt; \n#&gt; $zq95\n#&gt; [1] 28.39\n#&gt; \n#&gt; $zpcum1\n#&gt; [1] 18.12365\n#&gt; \n#&gt; $zpcum2\n#&gt; [1] 30.03214\n#&gt; \n#&gt; $zpcum3\n#&gt; [1] 35.78736\n#&gt; \n#&gt; $zpcum4\n#&gt; [1] 41.12687\n#&gt; \n#&gt; $zpcum5\n#&gt; [1] 45.38727\n#&gt; \n#&gt; $zpcum6\n#&gt; [1] 49.90123\n#&gt; \n#&gt; $zpcum7\n#&gt; [1] 56.24318\n#&gt; \n#&gt; $zpcum8\n#&gt; [1] 68.07501\n#&gt; \n#&gt; $zpcum9\n#&gt; [1] 91.75045"
  },
  {
    "objectID": "06_solutions.html#its",
    "href": "06_solutions.html#its",
    "title": "Excercise Solutions",
    "section": "6-ITS",
    "text": "6-ITS\nUsing:\n\nlas &lt;- readLAS(files = \"data/MixedEucaNat_normalized.laz\", filter = \"-set_withheld_flag 0\")\ncol1 &lt;- height.colors(50)\n\n\nE1.\nFind and count the trees.\n\n\nCode\nttops &lt;- locate_trees(las = las, algorithm = lmf(ws = 3, hmin = 5))\nx &lt;- plot(las)\nadd_treetops3d(x = x, ttops = ttops)\n\n\n\n\nE2.\nCompute and map the density of trees with a 10 m resolution.\n\n\nCode\nr &lt;- terra::rast(x = ttops)\nterra::res(r) &lt;- 10\nr &lt;- terra::rasterize(x = ttops, y = r, \"treeID\", fun = 'count')\nplot(r, col = viridis::viridis(20))\n\n\n\n\n\n\n\n\n\n\n\nE3.\nSegment the trees.\n\n\nCode\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = p2r(subcircle = 0.15))\nplot(chm, col = col1)\n\n\n\n\n\n\n\n\n\nCode\nttops &lt;- locate_trees(las = chm, algorithm = lmf(ws = 2.5))\nlas &lt;- segment_trees(las = las, dalponte2016(chm = chm, treetops = ttops))\n\nplot(las, color = \"treeID\")\n\n\n\n\nE4.\nAssuming that a value of interest of a tree can be estimated using the crown area and the mean Z of the points with the formula 2.5 * area + 3 * mean Z. Estimate the value of interest of each tree.\n\n\nCode\nvalue_of_interest &lt;- function(x,y,z)\n{\n  m &lt;- stdtreemetrics(x,y,z)\n  avgz &lt;- mean(z)\n  v &lt;- 2.5*m$convhull_area + 3 * avgz\n  return(list(V = v))\n}\n\nV &lt;- crown_metrics(las = las, func = ~value_of_interest(X,Y,Z))\nplot(x = V[\"V\"])\n\n\n\n\n\n\n\n\n\n\n\nE5.\nMap the total biomass at a resolution of 10 m. The output is a mixed of ABA and ITS\n\n\nCode\nVtot &lt;- rasterize(V, r, \"V\", fun = \"sum\")\nplot(Vtot, col = viridis::viridis(20))"
  },
  {
    "objectID": "06_solutions.html#lascatalog",
    "href": "06_solutions.html#lascatalog",
    "title": "Excercise Solutions",
    "section": "7-LASCATALOG",
    "text": "7-LASCATALOG\nThis exercise is complex because it involves options not yet described. Be sure to use the lidRbook and package documentation.\nUsing:\n\nctg &lt;- readLAScatalog(folder = \"data/Farm_A/\")\n\n\nE1.\nGenerate a raster of point density for the provided catalog. Hint: Look through the documentation for a function that will do this!\n\n\nCode\nctg &lt;- readLAScatalog(\"data/Farm_A/\", filter = \"-drop_withheld -drop_z_below 0 -drop_z_above 40\")\nD1 &lt;- rasterize_density(las = ctg, res = 4)\n\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 25 (4%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 25 (8%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 25 (12%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 25 (16%): state ✓\n#&gt; \n                                                                                \nChunk 5 of 25 (20%): state ✓\n#&gt; \n                                                                                \nChunk 6 of 25 (24%): state ✓\n#&gt; \n                                                                                \nChunk 7 of 25 (28%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 25s     \n                                                                                \nChunk 8 of 25 (32%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 26s     \n                                                                                \nChunk 9 of 25 (36%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 29s     \n                                                                                \nChunk 10 of 25 (40%): state ✓\n#&gt; \n                                                                                \nChunk 11 of 25 (44%): state ✓\n#&gt; \n                                                                                \nChunk 12 of 25 (48%): state ✓\n#&gt; \n                                                                                \nChunk 13 of 25 (52%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 25s     \n                                                                                \nChunk 14 of 25 (56%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 26s     \n                                                                                \nChunk 15 of 25 (60%): state ✓\n#&gt; \n                                                                                \nChunk 16 of 25 (64%): state ✓\n#&gt; \n                                                                                \nChunk 17 of 25 (68%): state ✓\n#&gt; \n                                                                                \nChunk 18 of 25 (72%): state ✓\n#&gt; \n                                                                                \nChunk 19 of 25 (76%): state ✓\n#&gt; \n                                                                                \nChunk 20 of 25 (80%): state ✓\n#&gt; \n                                                                                \nChunk 21 of 25 (84%): state ✓\n#&gt; \n                                                                                \nChunk 22 of 25 (88%): state ✓\n#&gt; \n                                                                                \nChunk 23 of 25 (92%): state ✓\n#&gt; \n                                                                                \nChunk 24 of 25 (96%): state ✓\n#&gt; \n                                                                                \nChunk 25 of 25 (100%): state ✓\n#&gt; \n                                                                                \nplot(D1, col = heat.colors(50))\n\n\n\n\n\n\n\n\n\n\nE2.\nModify the catalog to have a point density of 10 pts/m2 using the decimate_points() function. If you get an error make sure to read the documentation for decimate_points() and try: using opt_output_file() to write files to a temporary directory.\n\n\nCode\nnewctg &lt;- decimate_points(las = ctg, algorithm = homogenize(density = 10, res = 5))\n#&gt;  Error: This function requires that the LAScatalog provides an output file template.\n\n\n\n\nCode\nopt_filter(ctg) &lt;- \"-drop_withheld\"\nopt_output_files(ctg) &lt;- paste0(tempdir(), \"/{ORIGINALFILENAME}\")\nnewctg &lt;- decimate_points(las = ctg, algorithm = homogenize(density = 10, res = 5))\n\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 25 (4%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 25 (8%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 25 (12%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 25 (16%): state ✓\n#&gt; \n                                                                                \nChunk 5 of 25 (20%): state ✓\n#&gt; \n                                                                                \nChunk 6 of 25 (24%): state ✓\n#&gt; \n                                                                                \nChunk 7 of 25 (28%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 24s     \n                                                                                \nChunk 8 of 25 (32%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 25s     \n                                                                                \nChunk 9 of 25 (36%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 8% ETA: 26s     \n                                                                                \nChunk 10 of 25 (40%): state ✓\n#&gt; \n                                                                                \nChunk 11 of 25 (44%): state ✓\n#&gt; \n                                                                                \nChunk 12 of 25 (48%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 25s     \n                                                                                \nChunk 13 of 25 (52%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 23s     \n                                                                                \nChunk 14 of 25 (56%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n                                                                                \nChunk 15 of 25 (60%): state ✓\n#&gt; \n                                                                                \nChunk 16 of 25 (64%): state ✓\n#&gt; \n                                                                                \nChunk 17 of 25 (68%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 22s     \n                                                                                \nChunk 18 of 25 (72%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 19s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 24s     \n                                                                                \nChunk 19 of 25 (76%): state ✓\n#&gt; \n[=====&gt;                                            ] 10% ETA: 20s     \n[=====&gt;                                            ] 10% ETA: 21s     \n                                                                                \nChunk 20 of 25 (80%): state ✓\n#&gt; \n                                                                                \nChunk 21 of 25 (84%): state ✓\n#&gt; \n                                                                                \nChunk 22 of 25 (88%): state ✓\n#&gt; \n                                                                                \nChunk 23 of 25 (92%): state ✓\n#&gt; \n                                                                                \nChunk 24 of 25 (96%): state ✓\n#&gt; \n                                                                                \nChunk 25 of 25 (100%): state ✓\n#&gt; \n                                                                                \n\n\n\nE3.\nGenerate a raster of point density for this new decimated dataset.\n\n\nCode\nopt_output_files(newctg) &lt;- \"\"\nD2 &lt;- rasterize_density(las = newctg, res = 4)\n\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 25 (4%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 25 (8%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 25 (12%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 25 (16%): state ✓\n#&gt; \n                                                                                \nChunk 5 of 25 (20%): state ✓\n#&gt; \n                                                                                \nChunk 6 of 25 (24%): state ✓\n#&gt; \n                                                                                \nChunk 7 of 25 (28%): state ✓\n#&gt; \n                                                                                \nChunk 8 of 25 (32%): state ✓\n#&gt; \n                                                                                \nChunk 9 of 25 (36%): state ✓\n#&gt; \n                                                                                \nChunk 10 of 25 (40%): state ✓\n#&gt; \n                                                                                \nChunk 11 of 25 (44%): state ✓\n#&gt; \n                                                                                \nChunk 12 of 25 (48%): state ✓\n#&gt; \n                                                                                \nChunk 13 of 25 (52%): state ✓\n#&gt; \n                                                                                \nChunk 14 of 25 (56%): state ✓\n#&gt; \n                                                                                \nChunk 15 of 25 (60%): state ✓\n#&gt; \n                                                                                \nChunk 16 of 25 (64%): state ✓\n#&gt; \n                                                                                \nChunk 17 of 25 (68%): state ✓\n#&gt; \n                                                                                \nChunk 18 of 25 (72%): state ✓\n#&gt; \n                                                                                \nChunk 19 of 25 (76%): state ✓\n#&gt; \n                                                                                \nChunk 20 of 25 (80%): state ✓\n#&gt; \n                                                                                \nChunk 21 of 25 (84%): state ✓\n#&gt; \n                                                                                \nChunk 22 of 25 (88%): state ✓\n#&gt; \n                                                                                \nChunk 23 of 25 (92%): state ✓\n#&gt; \n                                                                                \nChunk 24 of 25 (96%): state ✓\n#&gt; \n                                                                                \nChunk 25 of 25 (100%): state ✓\n#&gt; \n                                                                                \nplot(D2, col = heat.colors(50))\n\n\n\n\n\n\n\n\n\n\nE4.\nRead the whole decimated catalog as a single las file. The catalog isn’t very big - not recommended for larger data sets!\n\n\nCode\nlas &lt;- readLAS(newctg)\n\n\nCode\nplot(las)\n\n\n\n\nE5.\nRead documentation for the catalog_retile() function and merge the dataset into larger tiles. Use ctg metadata to align new chunks to the lower left corner of the old ones. Hint: Visualize the chunks and use opt_chunk_* options.\n\n\nCode\nopt_chunk_size(ctg) &lt;- 280\nopt_chunk_buffer(ctg) &lt;- 0\nopt_chunk_alignment(ctg) &lt;- c(min(ctg$Min.X), min(ctg$Min.Y))\nplot(ctg, chunk = T)\n\n\n\n\n\n\n\n\n\nCode\n\nopt_output_files(ctg) &lt;- \"{tempdir()}/PRJ_A_{XLEFT}_{YBOTTOM}\"\nnewctg &lt;- catalog_retile(ctg = ctg)\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n                                                                                \nplot(newctg)"
  },
  {
    "objectID": "06_solutions.html#engine",
    "href": "06_solutions.html#engine",
    "title": "Excercise Solutions",
    "section": "8-ENGINE",
    "text": "8-ENGINE\n\nE1.\nThe following is a simple (and a bit naive) function to remove high noise points. - Explain what this function does - Create a user-defined function to apply using catalog_map() - Hint: Dont forget about buffered points… remember lidR::filter_* functions.\n\n\nCode\nfilter_noise &lt;- function(las, sensitivity)\n{\n  p95 &lt;- pixel_metrics(las, ~quantile(Z, probs = 0.95), 10)\n  las &lt;- merge_spatial(las, p95, \"p95\")\n  las &lt;- filter_poi(las, Z &lt; 1+p95*sensitivity, Z &gt; -0.5)\n  las$p95 &lt;- NULL\n  return(las)\n}\n\nfilter_noise_collection = function(las, sensitivity)\n{\n  las &lt;- filter_noise(las, sensitivity)\n  las &lt;- filter_poi(las, buffer == 0L)\n  return(las)\n}\n\nctg = readLAScatalog(\"data/Farm_A/\")\nopt_select(ctg) &lt;- \"*\"\nopt_filter(ctg) &lt;- \"-drop_withheld\"\nopt_output_files(ctg) &lt;- \"{tempdir()}/*\"\nopt_chunk_buffer(ctg) &lt;- 20\nopt_chunk_size(ctg) &lt;- 0\n\noutput &lt;- catalog_map(ctg, filter_noise_collection, sensitivity = 1.2)\n\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 25 (4%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 25 (8%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 25 (12%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 25 (16%): state ✓\n#&gt; \n                                                                                \nChunk 5 of 25 (20%): state ✓\n#&gt; \n                                                                                \nChunk 6 of 25 (24%): state ✓\n#&gt; \n                                                                                \nChunk 7 of 25 (28%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 16s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n                                                                                \nChunk 8 of 25 (32%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 18s     \n                                                                                \nChunk 9 of 25 (36%): state ✓\n#&gt; \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 19s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 12% ETA: 19s     \n[======&gt;                                           ] 12% ETA: 18s     \n[======&gt;                                           ] 13% ETA: 19s     \n                                                                                \nChunk 10 of 25 (40%): state ✓\n#&gt; \n[=========&gt;                                        ] 18% ETA: 9s     \n                                                                                \nChunk 11 of 25 (44%): state ✓\n#&gt; \n                                                                                \nChunk 12 of 25 (48%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 17s     \n[======&gt;                                           ] 12% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n                                                                                \nChunk 13 of 25 (52%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 12% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 14s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 16s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n                                                                                \nChunk 14 of 25 (56%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 17s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n[=======&gt;                                          ] 14% ETA: 17s     \n                                                                                \nChunk 15 of 25 (60%): state ✓\n#&gt; \n                                                                                \nChunk 16 of 25 (64%): state ✓\n#&gt; \n                                                                                \nChunk 17 of 25 (68%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[=======&gt;                                          ] 14% ETA: 15s     \n                                                                                \nChunk 18 of 25 (72%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 16s     \n[======&gt;                                           ] 13% ETA: 15s     \n[======&gt;                                           ] 13% ETA: 15s     \n[=======&gt;                                          ] 14% ETA: 15s     \n[=======&gt;                                          ] 14% ETA: 16s     \n                                                                                \nChunk 19 of 25 (76%): state ✓\n#&gt; \n[======&gt;                                           ] 13% ETA: 13s     \n[======&gt;                                           ] 13% ETA: 14s     \n[======&gt;                                           ] 13% ETA: 14s     \n[======&gt;                                           ] 13% ETA: 14s     \n[=======&gt;                                          ] 14% ETA: 14s     \n[=======&gt;                                          ] 14% ETA: 14s     \n[=======&gt;                                          ] 14% ETA: 14s     \n[=======&gt;                                          ] 14% ETA: 14s     \n[=======&gt;                                          ] 14% ETA: 14s     \n                                                                                \nChunk 20 of 25 (80%): state ✓\n#&gt; \n                                                                                \nChunk 21 of 25 (84%): state ✓\n#&gt; \n                                                                                \nChunk 22 of 25 (88%): state ✓\n#&gt; \n                                                                                \nChunk 23 of 25 (92%): state ✓\n#&gt; \n                                                                                \nChunk 24 of 25 (96%): state ✓\n#&gt; \n                                                                                \nChunk 25 of 25 (100%): state ✓\n#&gt; \n                                                                                \n\nlas &lt;- readLAS(output)\n#&gt; \n[==============================================&gt;   ] 93% ETA: 0s     \n[==============================================&gt;   ] 93% ETA: 0s     \n[==============================================&gt;   ] 93% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 94% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[===============================================&gt;  ] 95% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 96% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[================================================&gt; ] 97% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 98% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n[=================================================&gt;] 99% ETA: 0s     \n                                                                                \nplot(las)"
  },
  {
    "objectID": "04_metrics.html",
    "href": "04_metrics.html",
    "title": "Lidar Summary metrics",
    "section": "",
    "text": "Code\nlidRbook metrics section\nlidRbook modelling section\nlidRmetrics package for additional metrics"
  },
  {
    "objectID": "04_metrics.html#relevant-resources",
    "href": "04_metrics.html#relevant-resources",
    "title": "Lidar Summary metrics",
    "section": "",
    "text": "Code\nlidRbook metrics section\nlidRbook modelling section\nlidRmetrics package for additional metrics"
  },
  {
    "objectID": "04_metrics.html#overview",
    "href": "04_metrics.html#overview",
    "title": "Lidar Summary metrics",
    "section": "Overview",
    "text": "Overview\nThis code demonstrates an example of generating pixel-based summary metrics of LiDAR data. This is a common task to capture critical information describing the vertical distribution of lidar returns across a regular grid (raster). Pixel metrics are used in various predictive modelling tasks and often to capture critical vegetation characteristics ranging from height to variability and cover.\nBeyond statistical summary metrics such as (mean, max, sd, etc), many researchers have developed custom metrics linked to critical vegetation attributes such as leaf-area index, vertical complexity indices, etc.\nAdditional metrics can also be generated with lidR using voxel approaches, where three-dimensional sub-compartments are fit to better capture complexity — at the cost of vastly increasing computational requirements and introducing additional parameters.\nClassically, lidar metrics used in vegetation characterization typically fall under three categories:\n\nHeight metrics\nThese typically describe how tall the vegetation generally is. Often max height, mean height, and percentiles of height are important in the prediction of attributes including land cover, and continuous variables like biomass.\nVariability metrics\nMetrics describing the shape of the distribution of returns often capture additional signals useful for explaining the level of vegetation complexity within a pixel. Skewed versus bimodal distributions, for example, can represent a very dense upper canopy in a forest compared to a multi-layer stand.\nCover metrics\nOften referred directly to as canopy cover, these metrics generally describe the proportion of returns (as a %) above a certain threshold. Typically used to generally describe how much vegetation (e.g. above 2m) there is compared to ground and other lower surfaces (designed for forest)."
  },
  {
    "objectID": "04_metrics.html#environment",
    "href": "04_metrics.html#environment",
    "title": "Lidar Summary metrics",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)\nlibrary(sf)\nlibrary(lidRmetrics)"
  },
  {
    "objectID": "04_metrics.html#basic-usage",
    "href": "04_metrics.html#basic-usage",
    "title": "Lidar Summary metrics",
    "section": "Basic Usage",
    "text": "Basic Usage\nTo begin we compute simple metrics including mean and max height of points within 10x10 m pixels and visualizing the results. The code shows how to compute multiple metrics simultaneously and use predefined metric sets. Advanced usage introduces user-defined metrics for more specialized calculations.\n\n# Load the normalized LiDAR data\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\")\n\nThe pixel_metrics() function calculates structural metrics within a defined spatial resolution (res).\n\n# Compute the mean height of points within 10x10 m pixels\nhmean &lt;- pixel_metrics(las = las, func = ~mean(Z), res = 10)\nhmean\n\nclass       : SpatRaster \nsize        : 26, 26, 1  (nrow, ncol, nlyr)\nresolution  : 10, 10  (x, y)\nextent      : 2670500, 2670760, 1258730, 1258990  (xmin, xmax, ymin, ymax)\ncoord. ref. : CH1903+ / LV95 (EPSG:2056) \nsource(s)   : memory\nname        :          V1 \nmin value   :  0.01491925 \nmax value   : 28.90163739 \n\nplot(hmean)\n\n\n\n\n\n\n\n\n\n# Compute the max height of points within 10x10 m pixels\nhmax &lt;- pixel_metrics(las = las, func = ~max(Z), res = 10)\nhmax\n\nclass       : SpatRaster \nsize        : 26, 26, 1  (nrow, ncol, nlyr)\nresolution  : 10, 10  (x, y)\nextent      : 2670500, 2670760, 1258730, 1258990  (xmin, xmax, ymin, ymax)\ncoord. ref. : CH1903+ / LV95 (EPSG:2056) \nsource(s)   : memory\nname        :    V1 \nmin value   :  0.93 \nmax value   : 48.31 \n\nplot(hmax)\n\n\n\n\n\n\n\n\nYou can specify that multiple metrics should be calculated by housing them in a list().\n\n# Compute several metrics at once using a list\nmetrics &lt;- pixel_metrics(las = las, func = ~list(hmax = max(Z), hmean = mean(Z)), res = 10)\nmetrics\n\nclass       : SpatRaster \nsize        : 26, 26, 2  (nrow, ncol, nlyr)\nresolution  : 10, 10  (x, y)\nextent      : 2670500, 2670760, 1258730, 1258990  (xmin, xmax, ymin, ymax)\ncoord. ref. : CH1903+ / LV95 (EPSG:2056) \nsource(s)   : memory\nnames       :  hmax,       hmean \nmin values  :  0.93,  0.01491925 \nmax values  : 48.31, 28.90163739 \n\nplot(metrics)\n\n\n\n\n\n\n\n\nPre-defined metric sets are available, such as .stdmetrics_z. See more here.\n\n# Simplify computing metrics with predefined sets of metrics\nmetrics &lt;- pixel_metrics(las = las, func = .stdmetrics_z, res = 10)\nmetrics\n\nclass       : SpatRaster \nsize        : 26, 26, 36  (nrow, ncol, nlyr)\nresolution  : 10, 10  (x, y)\nextent      : 2670500, 2670760, 1258730, 1258990  (xmin, xmax, ymin, ymax)\ncoord. ref. : CH1903+ / LV95 (EPSG:2056) \nsource(s)   : memory\nnames       :  zmax,       zmean,         zsd,     zskew,      zkurt,   zentropy, ... \nmin values  :  0.93,  0.01491925,  0.07074514, -2.027288,   1.109003, 0.02902023, ... \nmax values  : 48.31, 28.90163739, 17.97744082, 16.645088, 308.212065, 0.93158775, ... \n\nplot(metrics)\n\n\n\n\n\n\n\n# Plot a specific metric from the predefined set\nplot(metrics, \"zsd\")"
  },
  {
    "objectID": "04_metrics.html#advanced-usage-with-user-defined-metrics",
    "href": "04_metrics.html#advanced-usage-with-user-defined-metrics",
    "title": "Lidar Summary metrics",
    "section": "Advanced Usage with User-Defined Metrics",
    "text": "Advanced Usage with User-Defined Metrics\n\n\n\n\n\n\n3rd party LiDAR metrics packages\n\n\n\nlidR provides flexibility for users to define custom metrics. Check out 3rd party packages like lidRmetrics for suites of advanced metrics typically demonstrated in peer-reviewed articles and implemented in lidR through lidRmetrics.\n\n\nCanopy Cover\n\ncc_metrics &lt;- pixel_metrics(las, func = ~metrics_percabove(z = Z, threshold = 2, zmin = 0), res = 10)\nplot(cc_metrics)\n\n\n\n\n\n\n\n\nLeaf Area Density Profiles (Bouvier et al. 2015)\n\nlad_metrics &lt;- pixel_metrics(las, ~metrics_lad(z = Z), res = 10)\nplot(lad_metrics)\n\n\n\n\n\n\n\n\nADD VERTICAL COMPLEXITY INDEX\nWe can also create our own user-defined metric functions. This demonstrates the flexibility of the lidR package!\n\n# Generate a user-defined function to compute weighted mean between two attributes\nf &lt;- function(x, weight) { sum(x*weight)/sum(weight) }\n\n# Compute weighted mean of height (Z) as a function of return intensity\nuser_metric &lt;- pixel_metrics(las = las, func = ~f(Z, Intensity), res = 10)\n\n# Visualize the output\nplot(user_metric)"
  },
  {
    "objectID": "04_metrics.html#exercises-and-questions",
    "href": "04_metrics.html#exercises-and-questions",
    "title": "Lidar Summary metrics",
    "section": "Exercises and Questions",
    "text": "Exercises and Questions\nUsing:\nlas &lt;- readLAS(\"data/zrh_norm.laz\")\n\nE1.\nGenerate another metric set provided by the lidRmetrics package (voxel metrics will take too long)\n\n\nE2.\nMap the density of ground returns at a 5 m resolution with hint filter = -keep_class 2\n\n\nE3.\nAssuming that biomass is estimated using the equation B = 0.5 * mean Z + 0.9 * 90th percentile of Z applied on first returns only, map the biomass."
  },
  {
    "objectID": "04_metrics.html#conclusion",
    "href": "04_metrics.html#conclusion",
    "title": "Lidar Summary metrics",
    "section": "Conclusion",
    "text": "Conclusion\nIn this tutorial, we covered basic usage of the lidR package for computing mean and max heights within grid cells and using predefined sets of metrics. Additionally, we explored the advanced usage with the ability to define user-specific metrics for grid computation."
  },
  {
    "objectID": "02_dtm.html",
    "href": "02_dtm.html",
    "title": "Digital Terrain Models",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "02_dtm.html#relevant-resources",
    "href": "02_dtm.html#relevant-resources",
    "title": "Digital Terrain Models",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "02_dtm.html#overview",
    "href": "02_dtm.html#overview",
    "title": "Digital Terrain Models",
    "section": "Overview",
    "text": "Overview\nThis tutorial explores the creation of a Digital Terrain Model (DTM) from LiDAR data. It demonstrates two algorithms for DTM generation: ground point triangulation, and inverse-distance weighting. Additionally, the tutorial showcases DTM-based normalization and point-based normalization, accompanied by exercises for hands-on practice."
  },
  {
    "objectID": "02_dtm.html#environment",
    "href": "02_dtm.html#environment",
    "title": "Digital Terrain Models",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)"
  },
  {
    "objectID": "02_dtm.html#dtm-digital-terrain-model",
    "href": "02_dtm.html#dtm-digital-terrain-model",
    "title": "Digital Terrain Models",
    "section": "DTM (Digital Terrain Model)",
    "text": "DTM (Digital Terrain Model)\nIn this section, we’ll generate a Digital Terrain Model (DTM) from LiDAR data using two different algorithms: tin() and knnidw().\n\nData Preprocessing\n\n# Load LiDAR data where points are already pre-classified\nlas &lt;- readLAS(files = \"data/zrh_class.laz\")\n\n\n\nVisualizing LiDAR Data\nWe start by visualizing the entire LiDAR point cloud to get an initial overview.\nplot(las)\nVisualizing the LiDAR data again, this time to distinguish ground points (blue) more effectively.\nplot(las, color = \"Classification\")\n\n\nTriangulation Algorithm - tin()\nWe create a DTM using the tin() algorithm with a resolution of 1 meter.\n\n# Generate a DTM using the TIN (Triangulated Irregular Network) algorithm\ndtm_tin &lt;- rasterize_terrain(las = las, res = 1, algorithm = tin())\n\n\n\n\n\n\n\nDegenerated points\n\n\n\nYou may receive a warning about degenerated points when creating a DTM. A degenerated point in LiDAR data refers to a point with identical XY(Z) coordinates as another point. This means two or more points occupy exactly the same location in XY/3D space. Degenerated points can cause issues in tasks like creating a digital terrain model, as they don’t add new information and can lead to inconsistencies. Identifying and handling degenerated points appropriately is crucial for accurate and meaningful results.\n\n\n\n\nVisualizing DTM in 3D\nTo better conceptualize the terrain, we visualize the generated DTM in a 3D plot.\n# Visualize the DTM in 3D\nplot_dtm3d(dtm_tin)\n\n\nVisualizing DTM with LiDAR Data\nWe overlay the DTM on the LiDAR data (non-ground points only) for a more comprehensive view of the terrain.\n# Filter for non-ground points to show dtm better\nlas_ng &lt;- filter_poi(las = las, Classification != 2L)\n\n# Visualize the LiDAR data with the overlaid DTM in 3D\nx &lt;- plot(las_ng, bg = \"white\")\nadd_dtm3d(x, dtm_tin, bg = \"white\")\n\n\nInverse-Distance Weighting (IDW) Algorithm - knnidw()\nNext, we generate a DTM using the IDW algorithm to compare results with the TIN-based DTM.\n\n# Generate a DTM using the IDW (Inverse-Distance Weighting) algorithm\ndtm_idw &lt;- rasterize_terrain(las = las, res = 1, algorithm = knnidw())\n\n\n\nVisualizing IDW-based DTM in 3D\nWe visualize the DTM generated using the IDW algorithm in a 3D plot.\n# Visualize the IDW-based DTM in 3D\nplot_dtm3d(dtm_idw)"
  },
  {
    "objectID": "02_dtm.html#normalization",
    "href": "02_dtm.html#normalization",
    "title": "Digital Terrain Models",
    "section": "Normalization",
    "text": "Normalization\nWe’ll focus on height normalization of LiDAR data using both DTM-based and point-based normalization methods.\n\nDTM-based Normalization\nWe perform DTM-based normalization on the LiDAR data using the previously generated DTM.\n\n# Normalize the LiDAR data using DTM-based normalization\nnlas_dtm &lt;- normalize_height(las = las, algorithm = dtm_tin)\n\n\n\nVisualizing Normalized LiDAR Data\nWe visualize the normalized LiDAR data, illustrating heights relative to the DTM.\n# Visualize the normalized LiDAR data\nplot(nlas_dtm)\n\n\nDTM-based Normalization with TIN Algorithm\nWe perform DTM-based normalization on the LiDAR data using the TIN algorithm.\n\n# Normalize the LiDAR data using DTM-based normalization with TIN algorithm\nnlas_tin &lt;- normalize_height(las = las, algorithm = tin())\n\n\n\nVisualizing Normalized LiDAR Data with TIN\nWe visualize the normalized LiDAR data using the TIN algorithm, showing heights relative to the DTM.\n\n# Visualize the normalized LiDAR data using the TIN algorithm\nplot(nlas_tin, bg = \"white\")"
  },
  {
    "objectID": "02_dtm.html#exercises",
    "href": "02_dtm.html#exercises",
    "title": "Digital Terrain Models",
    "section": "Exercises",
    "text": "Exercises\n\nE1.\n\n\nE2.\n\n\nE3.\nCompute two DTMs for this point cloud with differing spatial resolutions, plot both e.g. plot(dtm1)"
  },
  {
    "objectID": "02_dtm.html#conclusion",
    "href": "02_dtm.html#conclusion",
    "title": "Digital Terrain Models",
    "section": "Conclusion",
    "text": "Conclusion\nThis tutorial covered the creation of Digital Terrain Models (DTMs) from LiDAR data using different algorithms and explored height normalization techniques. The exercises provided hands-on opportunities to apply these concepts, enhancing understanding and practical skills."
  },
  {
    "objectID": "01_read.html",
    "href": "01_read.html",
    "title": "Read/Plot/Query/Validate",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "01_read.html#relevant-resources",
    "href": "01_read.html#relevant-resources",
    "title": "Read/Plot/Query/Validate",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "01_read.html#overview",
    "href": "01_read.html#overview",
    "title": "Read/Plot/Query/Validate",
    "section": "Overview",
    "text": "Overview\nWelcome to this lidar processing tutorial using R and the lidR package! In this tutorial, you will learn how to read, visualize, query, and validate lidar data. We’ll explore basic information about a lidar file including the header and tabular data, as well as visualize point clouds using different colour schemes based on attributes. We’ll use the select argument in readLAS() to load specific attributes and the filter argument to only load points of interest or apply transformations on-the-fly.\nLet’s get started with processing lidar data efficiently using lidR and R! Happy learning!"
  },
  {
    "objectID": "01_read.html#environment",
    "href": "01_read.html#environment",
    "title": "Read/Plot/Query/Validate",
    "section": "Environment",
    "text": "Environment\nWe start by loading the necessary packages, clearing our current environment, and specifying that some warnings be turned off to make our outputs clearer. We will do this for each section in the tutorial.\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)\nlibrary(sf)"
  },
  {
    "objectID": "01_read.html#basic-usage",
    "href": "01_read.html#basic-usage",
    "title": "Read/Plot/Query/Validate",
    "section": "Basic Usage",
    "text": "Basic Usage\n\nLoad and Inspect lidar Data\nLoad the lidar point cloud data from a LAS file using the readLAS() function. The data is stored in the las object. We can inspect the header information and attributes of the las object.\n\n# Load the sample point cloud\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\")\n# Inspect header information\nlas@header\n\nFile signature:           LASF \nFile source ID:           0 \nGlobal encoding:\n - GPS Time Type: GPS Week Time \n - Synthetic Return Numbers: no \n - Well Know Text: CRS is GeoTIFF \n - Aggregate Model: false \nProject ID - GUID:        00000000-0000-0000-5053-004d00000000 \nVersion:                  1.1\nSystem identifier:         \nGenerating software:      rlas R package \nFile creation d/y:        0/0\nheader size:              227 \nOffset to point data:     305 \nNum. var. length record:  1 \nPoint data format:        1 \nPoint data record length: 28 \nNum. of point records:    1270080 \nNum. of points by return: 471651 342346 241371 135987 56797 \nScale factor X Y Z:       0.01 0.01 0.01 \nOffset X Y Z:             0 0 0 \nmin X Y Z:                2670505 1258734 -0.88 \nmax X Y Z:                2670755 1258984 48.31 \nVariable Length Records (VLR):\n   Variable Length Record 1 of 1 \n       Description: by LAStools of rapidlasso GmbH \n       Tags:\n          Key 1024 value 1 \n          Key 3072 value 2056 \nExtended Variable Length Records (EVLR):  void\n\n# Inspect attributes of the point cloud\nlas@data\n\n               X       Y     Z  gpstime Intensity ReturnNumber NumberOfReturns\n           &lt;num&gt;   &lt;num&gt; &lt;num&gt;    &lt;num&gt;     &lt;int&gt;        &lt;int&gt;           &lt;int&gt;\n      1: 2670506 1258984 18.57 81219489        66            3               3\n      2: 2670506 1258984 23.27 81219786       164            1               4\n      3: 2670506 1258984 20.64 81219786        81            2               3\n      4: 2670507 1258984  0.00 81218049        22            3               3\n      5: 2670505 1258983  0.00 81218049        34            3               3\n     ---                                                                      \n1270076: 2670754 1258736 17.38 81219485       392            1               4\n1270077: 2670754 1258736 17.72 81219485        20            1               4\n1270078: 2670754 1258735 13.45 81219485        65            2               4\n1270079: 2670754 1258735 16.41 81219485        22            1               4\n1270080: 2670754 1258734 15.43 81219485        93            2               4\n         ScanDirectionFlag EdgeOfFlightline Classification Synthetic_flag\n                     &lt;int&gt;            &lt;int&gt;          &lt;int&gt;         &lt;lgcl&gt;\n      1:                 0                0              5          FALSE\n      2:                 0                0              5          FALSE\n      3:                 0                0              5          FALSE\n      4:                 0                0              2          FALSE\n      5:                 0                0              2          FALSE\n     ---                                                                 \n1270076:                 0                0              5          FALSE\n1270077:                 0                0              5          FALSE\n1270078:                 0                0              5          FALSE\n1270079:                 0                0              5          FALSE\n1270080:                 0                0              5          FALSE\n         Keypoint_flag Withheld_flag ScanAngleRank UserData PointSourceID\n                &lt;lgcl&gt;        &lt;lgcl&gt;         &lt;int&gt;    &lt;int&gt;         &lt;int&gt;\n      1:         FALSE         FALSE             3        0         10414\n      2:         FALSE         FALSE             8        0         10415\n      3:         FALSE         FALSE             8        0         10415\n      4:         FALSE         FALSE           -13        0         10413\n      5:         FALSE         FALSE           -13        0         10413\n     ---                                                                 \n1270076:         FALSE         FALSE           -13        0         10414\n1270077:         FALSE         FALSE           -13        0         10414\n1270078:         FALSE         FALSE           -13        0         10414\n1270079:         FALSE         FALSE           -13        0         10414\n1270080:         FALSE         FALSE           -13        0         10414\n\n# Check the file size of the loaded lidar data\nformat(object.size(las), \"Mb\")\n\n[1] \"96.9 Mb\"\n\n\n\n\nVisualizing lidar Data\nWe can visualize the lidar data using the plot() function. We have several options to control the colours in the plot, such as selecting specific attributes from the data to be mapped.\n\n\n\n\n\n\nplot() background colour\n\n\n\nSet the background of plots to white using plot(las, bg = \"white\"). To keep the website code clean I’ve omitted this from examples.\n\n\nplot(las)\nplot(las, color = \"Intensity\")\nplot(las, color = \"Classification\")\nplot(las, color = \"ScanAngleRank\", axis = TRUE, legend = TRUE)\n\n\nLidar point clouds have additional attributes beyond X, Y and Z\nPoints are typically assigned Classification values to differentiate surfaces. This is often already done by the data provider or through user applied algorithms to classify for example noise and ground. The meaning of these ID values depends on the LAS file version and source.\nOur example ALS dataset, collected in 2014 over Zürich uses an older LAS 1.1 standard. Its classification codes are interpreted as follows:\n\n\n\n\n\n\n\n\nClass Code\nMeaning\nInterpretation\n\n\n\n\n2\nGround\nThe bare earth surface.\n\n\n3/4/5\nLow/Medium/High Vegetation\nVegetation under 1 meter.\n\n\n7\nLow Point (Noise)\nErroneous points, likely below ground.\n\n\n12\nOverlap Points\nUser-defined class for points in overlapping flight lines.\n\n\n\n\n\nSelecting Attributes of Interest\nThe readLAS() function allows us to select specific attributes to be loaded into memory. This is useful to reduce memory requirements when working with large lidar datasets.\n\n# Load only the xyz coordinates (X, Y, Z) and ignore other attributes\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\", select = \"xyz\")\n# Inspect the loaded attributes\nlas@data\n\n               X       Y     Z\n           &lt;num&gt;   &lt;num&gt; &lt;num&gt;\n      1: 2670506 1258984 18.57\n      2: 2670506 1258984 23.27\n      3: 2670506 1258984 20.64\n      4: 2670507 1258984  0.00\n      5: 2670505 1258983  0.00\n     ---                      \n1270076: 2670754 1258736 17.38\n1270077: 2670754 1258736 17.72\n1270078: 2670754 1258735 13.45\n1270079: 2670754 1258735 16.41\n1270080: 2670754 1258734 15.43\n\n# Check the memory size after loading only the selected attributes\nformat(object.size(las), \"Mb\")\n\n[1] \"29.1 Mb\"\n\n\n\n\nFiltering Points of Interest\nWe can also load only a subset of the lidar points based on certain criteria using the filter argument in readLAS().\n\n# Load only the first return points\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\", filter = \"-keep_first\")\n# Inspect the loaded points\nlas\n\nclass        : LAS (v1.1 format 1)\nmemory       : 25.2 Mb \nextent       : 2670505, 2670755, 1258734, 1258984 (xmin, xmax, ymin, ymax)\ncoord. ref.  : CH1903+ / LV95 \narea         : 63476 m²\npoints       : 471.7 thousand points\ntype         : airborne\ndensity      : 7.43 points/m²\ndensity      : 7.43 pulses/m²\n\n# Check the memory size after loading only the filtered points\nformat(object.size(las), \"Mb\")\n\n[1] \"36 Mb\"\n\n\nplot(las)\n\n\nFiltering points on-the-fly (efficient)\nThe filter argument in readLAS() can be used to apply transformations on-the-fly during loading. This can be useful for tasks such as filtering specific classifications.\n\n# Load and visualize with an applied filter\nlas &lt;- readLAS(files = \"data/zrh_class.laz\", filter = \"-keep_class 2\")\n\nplot(las)\n\n\nFiltering Points using filter_poi()\nAn alternative method for filtering points is using the filter_poi() function, which allows filtering based on attributes of points after the pointcloud is loaded.\n\n# Filter points with Classification == 2\nclass_2 &lt;- filter_poi(las = las, Classification == 2L)\n\n# Combine queries to filter points with Classification 2 and ReturnNumber == 1\nfirst_returns &lt;- filter_poi(las = las, Classification == 2L & ReturnNumber == 1L)\n\nplot(class_2)\nplot(first_returns)"
  },
  {
    "objectID": "01_read.html#exercises-and-questions",
    "href": "01_read.html#exercises-and-questions",
    "title": "Read/Plot/Query/Validate",
    "section": "Exercises and Questions",
    "text": "Exercises and Questions\nUsing:\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\")"
  },
  {
    "objectID": "01_read.html#conclusion",
    "href": "01_read.html#conclusion",
    "title": "Read/Plot/Query/Validate",
    "section": "Conclusion",
    "text": "Conclusion\nThis concludes our tutorial on the basic usage of the lidR package in R for processing and analyzing lidar data. We covered loading lidar data, inspecting and visualizing the data, selecting specific attributes, and filtering points of interest."
  },
  {
    "objectID": "03_chm.html",
    "href": "03_chm.html",
    "title": "Canopy Height Models",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "03_chm.html#relevant-resources",
    "href": "03_chm.html#relevant-resources",
    "title": "Canopy Height Models",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "03_chm.html#overview",
    "href": "03_chm.html#overview",
    "title": "Canopy Height Models",
    "section": "Overview",
    "text": "Overview\nThis code demonstrates the creation of a Canopy Height Model (CHM). It shows different algorithms for generating CHMs and provides options for adjusting resolution and filling empty pixels."
  },
  {
    "objectID": "03_chm.html#environment",
    "href": "03_chm.html#environment",
    "title": "Canopy Height Models",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)\nlibrary(terra)"
  },
  {
    "objectID": "03_chm.html#data-preprocessing",
    "href": "03_chm.html#data-preprocessing",
    "title": "Canopy Height Models",
    "section": "Data Preprocessing",
    "text": "Data Preprocessing\nWe once again load the LiDAR and visualize the resulting point cloud.\n\n# Load LiDAR data and reduce point density\nlas &lt;- readLAS(files = \"data/zrh_norm.laz\")\ncol &lt;- height.colors(50)\n\n# Visualize the LiDAR point cloud\nplot(las)"
  },
  {
    "objectID": "03_chm.html#point-to-raster-based-algorithm",
    "href": "03_chm.html#point-to-raster-based-algorithm",
    "title": "Canopy Height Models",
    "section": "Point-to-Raster Based Algorithm",
    "text": "Point-to-Raster Based Algorithm\nWe demonstrate a simple method for generating Canopy Height Models (CHMs). Below, the rasterize_canopy() function with the p2r() algorithm assigns the elevation of the highest point within each grid cell to a corresponding pixel. The resulting CHM is then visualized using the plot() function.\n\n# Generate the CHM using a simple point-to-raster based algorithm\nchm &lt;- rasterize_canopy(las = las, res = 2, algorithm = p2r())\n\n# Visualize the CHM\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nFirst we generate a CHM at 2m spatial resolution\n\n# Make spatial resolution 1 m\nchm &lt;- rasterize_canopy(las = las, res = 1, algorithm = p2r())\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nBy increasing the resolution of the CHM to 1m (reducing the grid cell size), we get a more detailed representation of the canopy, but also have more empty pixels.\n\n# Using the 'subcircle' option turns each point into a disc of 8 points with a radius r\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = p2r(subcircle = 0.15))\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nFurther increasing to 50 cm causes more empty pixels where no valid points are present. (see tiny white dots on CHM)\nThe rasterize_canopy() function with the p2r() algorithm allows the use of the subcircle option, which turns each LiDAR point into a disc of 8 points with a specified radius. This can help to capture more fine-grained canopy details, especially from lower density point clouds, resulting in a complete CHM.\n\n# Increasing the subcircle radius, but it may not have meaningful results\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = p2r(subcircle = 0.8))\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nIncreasing the subcircle radius may not necessarily result in meaningful CHMs, as it could lead to over-smoothing or loss of important canopy information.\n\n# We can fill empty pixels using TIN interpolation\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = p2r(subcircle = 0.0, na.fill = tin()))\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nThe p2r() algorithm also allows filling empty pixels using TIN (Triangulated Irregular Network) interpolation, which can help in areas with sparse LiDAR points to obtain a smoother CHM."
  },
  {
    "objectID": "03_chm.html#triangulation-based-pitfree-algorithm",
    "href": "03_chm.html#triangulation-based-pitfree-algorithm",
    "title": "Canopy Height Models",
    "section": "Triangulation Based Pitfree Algorithm",
    "text": "Triangulation Based Pitfree Algorithm\nThe rasterize_canopy function can also use the Khosravipour et al. 2014 pit-free algorithm with specified height thresholds and a maximum edge length to generate a CHM. This algorithm aims to correct depressions in the CHM surface.\n\n\n\n\n\n\nPit-free algorithm\n\n\n\nCheck out Khosravipour et al. 2014 to see the original implementation of the algorithm!\n\n\n\n# Using the Khosravipour et al. 2014 pit-free algorithm with specified thresholds and maximum edge length\nthresholds &lt;- c(0, 5, 10, 20, 25, 30)\nmax_edge &lt;- c(0, 1.35)\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = pitfree(thresholds, max_edge))\nplot(chm, col = col)\n\n\n\n\n\n\n\n\nThe subcircle option can be used with the pit-free algorithm to create finer spatial resolution CHMs with subcircles for each LiDAR point, similar to the point-to-raster based algorithm.\n\n# Using the 'subcircle' option with the pit-free algorithm\nchm &lt;- rasterize_canopy(las = las, res = 0.5, algorithm = pitfree(thresholds, max_edge, 0.1))\nplot(chm, col = col)"
  },
  {
    "objectID": "03_chm.html#post-processing",
    "href": "03_chm.html#post-processing",
    "title": "Canopy Height Models",
    "section": "Post-Processing",
    "text": "Post-Processing\nCHMs can be post-processed by smoothing or other manipulations. Here, we demonstrate post-processing using the terra::focal() function for average smoothing within a 3x3 moving window.\n\n# Post-process the CHM using the 'terra' package and focal() function for smoothing\nker &lt;- matrix(1, 3, 3)\nschm &lt;- terra::focal(chm, w = ker, fun = mean, na.rm = TRUE)\n\n# Visualize the smoothed CHM\nplot(schm, col = col)"
  },
  {
    "objectID": "03_chm.html#exercises",
    "href": "03_chm.html#exercises",
    "title": "Canopy Height Models",
    "section": "Exercises",
    "text": "Exercises\n\nE1.\n\n\nE2.\n\n\nE3."
  },
  {
    "objectID": "03_chm.html#conclusion",
    "href": "03_chm.html#conclusion",
    "title": "Canopy Height Models",
    "section": "Conclusion",
    "text": "Conclusion\nThis tutorial covered different algorithms for generating Canopy Height Models (CHMs) from LiDAR data using the lidR package in R. It includes point-to-raster-based algorithms and triangulation-based algorithms, as well as post-processing using the terra package."
  },
  {
    "objectID": "05_engine.html",
    "href": "05_engine.html",
    "title": "LAScatalog",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "05_engine.html#relevant-resources",
    "href": "05_engine.html#relevant-resources",
    "title": "LAScatalog",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "05_engine.html#overview",
    "href": "05_engine.html#overview",
    "title": "LAScatalog",
    "section": "Overview",
    "text": "Overview\nThis code performs various operations on LiDAR data using LAScatalog functionality. We visualize and inspect the data, validate the files, clip the data based on specific coordinates, generate a Canopy Height Model (CHM), specify processing options, and use parallel computing."
  },
  {
    "objectID": "05_engine.html#environment",
    "href": "05_engine.html#environment",
    "title": "LAScatalog",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)\nlibrary(sf)"
  },
  {
    "objectID": "05_engine.html#basic-usage",
    "href": "05_engine.html#basic-usage",
    "title": "LAScatalog",
    "section": "Basic Usage",
    "text": "Basic Usage\nIn this section, we will cover the basic usage of the lidR package, including reading LiDAR data, visualization, and inspecting metadata.\n\nRead catalog from directory of files\nWe begin by creating a LAS catalog (ctg) from a folder containing multiple .las/.laz files using the readLAScatalog() function.\n\n# Read catalog and drop withheld\nctg &lt;- readLAScatalog(folder = \"data/ctg_norm\")\n#&gt; Be careful, some tiles seem to overlap each other. lidR may return incorrect outputs with edge artifacts when processing this catalog.\n\n\n\nInspect catalog\nWe can inspect the contents of the catalog using standard R functions.\n\nctg\n#&gt; class       : LAScatalog (v1.1 format 1)\n#&gt; extent      : 2670500, 2672000, 1258500, 1260000 (xmin, xmax, ymin, ymax)\n#&gt; coord. ref. : CH1903+ / LV95 \n#&gt; area        : 2.25 km²\n#&gt; points      : 22.51 million points\n#&gt; type        : airborne\n#&gt; density     : 10 points/m²\n#&gt; density     : 4 pulses/m²\n#&gt; num. files  : 9\n\n\n\nVisualize catalog\nWe can visualize the catalog, showing the spatial coverage of the LiDAR data header extents. The map can be interactive if we use map = TRUE. Try clicking on a tile to see its header information.\n\nplot(ctg)\n\n\n\n\n\n\n\n# Interactive\nplot(ctg, map = TRUE)\n#&gt; 'mapview' is required to display the LAScatalog interactively."
  },
  {
    "objectID": "05_engine.html#file-indexing",
    "href": "05_engine.html#file-indexing",
    "title": "LAScatalog",
    "section": "File indexing",
    "text": "File indexing\nWe can explore indexing of LAScatalog objects for efficient processing.\n\n\n\n\n\n\nIndexing\n\n\n\nThe lidR policy has always been: use LAStools and lasindex for spatial indexing. If you really don’t want, or can’t use LAStools, then there is a hidden function in lidR that users can use (lidR:::catalog_laxindex()).\n\n\n\n# check if files have .lax\nis.indexed(ctg)\n#&gt; [1] FALSE\n\n# generate index files\nlidR:::catalog_laxindex(ctg)\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; Chunk 2 of 9 (22.2%): state ✓\n#&gt; Chunk 3 of 9 (33.3%): state ✓\n#&gt; Chunk 4 of 9 (44.4%): state ✓\n#&gt; Chunk 5 of 9 (55.6%): state ✓\n#&gt; Chunk 6 of 9 (66.7%): state ✓\n#&gt; Chunk 7 of 9 (77.8%): state ✓\n#&gt; Chunk 8 of 9 (88.9%): state ✓\n#&gt; Chunk 9 of 9 (100%): state ✓\n\n# check if files have .lax\nis.indexed(ctg)\n#&gt; [1] TRUE"
  },
  {
    "objectID": "05_engine.html#generate-chm",
    "href": "05_engine.html#generate-chm",
    "title": "LAScatalog",
    "section": "Generate CHM",
    "text": "Generate CHM\nWe create a CHM by rasterizing the point cloud data from the catalog similarly to how we processed a single file.\n\n# Generate CHM\nchm &lt;- rasterize_canopy(las = ctg, res = 0.5, algorithm = p2r(subcircle = 0.15))\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 15s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 14s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 22s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 25s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[============&gt;                                     ] 25% ETA: 8s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[=======&gt;                                          ] 15% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 14s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 17s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nplot(chm)"
  },
  {
    "objectID": "05_engine.html#catalog-processing-options",
    "href": "05_engine.html#catalog-processing-options",
    "title": "LAScatalog",
    "section": "Catalog processing options",
    "text": "Catalog processing options\nWe explore and manipulate catalog options.\n\n# Setting options and re-rasterizing the CHM\nopt_filter(ctg) &lt;- \"-drop_z_below 0 -drop_z_above 50\"\nopt_select(ctg) &lt;- \"xyz\"\nchm &lt;- rasterize_canopy(las = ctg, res = 0.5, algorithm = p2r(subcircle = 0.15))\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[===========&gt;                                      ] 22% ETA: 6s     \n[===========&gt;                                      ] 22% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 14s     \n[========&gt;                                         ] 16% ETA: 16s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 14s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 24s     \n[=====&gt;                                            ] 11% ETA: 26s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 16s     \n[========&gt;                                         ] 16% ETA: 17s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nplot(chm)"
  },
  {
    "objectID": "05_engine.html#generate-pixel-metrics-and-visualize",
    "href": "05_engine.html#generate-pixel-metrics-and-visualize",
    "title": "LAScatalog",
    "section": "Generate pixel metrics and visualize",
    "text": "Generate pixel metrics and visualize\nWe calculate summary metric rasters using the pixel_metrics function and visualize the results.\n\n# Generate pixel-based metrics\nmax_z &lt;- pixel_metrics(las = ctg, func = ~max(Z), res = 20)\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[===========&gt;                                      ] 23% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 7s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 16s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n[=============&gt;                                    ] 26% ETA: 6s     \n[=============&gt;                                    ] 26% ETA: 7s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 14% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 13s     \n[========&gt;                                         ] 16% ETA: 14s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 10% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 17s     \n[=====&gt;                                            ] 11% ETA: 18s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 23s     \n[=====&gt;                                            ] 11% ETA: 24s     \n[=====&gt;                                            ] 11% ETA: 26s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[========&gt;                                         ] 16% ETA: 10s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 8s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[=======&gt;                                          ] 15% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 11s     \n[========&gt;                                         ] 16% ETA: 12s     \n[========&gt;                                         ] 16% ETA: 14s     \n[========&gt;                                         ] 16% ETA: 15s     \n[========&gt;                                         ] 16% ETA: 17s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 24% ETA: 6s     \n[============&gt;                                     ] 25% ETA: 6s     \n                                                                                \nplot(max_z)"
  },
  {
    "objectID": "05_engine.html#first-returns-only",
    "href": "05_engine.html#first-returns-only",
    "title": "LAScatalog",
    "section": "First returns only",
    "text": "First returns only\nWe adjust the catalog options to calculate metrics based on first returns only.\n\nopt_filter(ctg) &lt;- \"-drop_z_below 0 -drop_z_above 50 -keep_first\"\nmax_z &lt;- pixel_metrics(las = ctg, func = ~max(Z), res = 20)\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 25s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 57s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 13s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[===&gt;                                              ] 6% ETA: 30s     \n[===&gt;                                              ] 6% ETA: 30s     \n[===&gt;                                              ] 6% ETA: 30s     \n[===&gt;                                              ] 6% ETA: 30s     \n[===&gt;                                              ] 6% ETA: 29s     \n[===&gt;                                              ] 6% ETA: 29s     \n[===&gt;                                              ] 6% ETA: 29s     \n[===&gt;                                              ] 6% ETA: 36s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=&gt;                                                ] 3% ETA: 57s     \n[=&gt;                                                ] 3% ETA: 57s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 86s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[====&gt;                                             ] 9% ETA: 22s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[=====&gt;                                            ] 10% ETA: 21s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 57s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 15s     \n                                                                                \nplot(max_z)\n\n\n\n\n\n\n\n\n\nParallel computing\nIn this section, we explore parallel computing using the lidR package."
  },
  {
    "objectID": "05_engine.html#load-future-library",
    "href": "05_engine.html#load-future-library",
    "title": "LAScatalog",
    "section": "Load future library",
    "text": "Load future library\nWe load the future library to enable parallel processing.\n\nlibrary(future)"
  },
  {
    "objectID": "05_engine.html#specify-catalog-options",
    "href": "05_engine.html#specify-catalog-options",
    "title": "LAScatalog",
    "section": "Specify catalog options",
    "text": "Specify catalog options\nWe specify catalog options for parallel processing.\n\n# Specify options\nopt_select(ctg) &lt;- \"xyz\"\nopt_chunk_size(ctg) &lt;- 500\nopt_chunk_buffer(ctg) &lt;- 10\n\n# Visualize and summarize the catalog chunks\nplot(ctg, chunk = TRUE)\n\n\n\n\n\n\n\nsummary(ctg)\n#&gt; class       : LAScatalog (v1.1 format 1)\n#&gt; extent      : 2670500, 2672000, 1258500, 1260000 (xmin, xmax, ymin, ymax)\n#&gt; coord. ref. : CH1903+ / LV95 \n#&gt; area        : 2.25 km²\n#&gt; points      : 22.51 million points\n#&gt; type        : airborne\n#&gt; density     : 10 points/m²\n#&gt; density     : 4 pulses/m²\n#&gt; num. files  : 9 \n#&gt; proc. opt.  : buffer: 10 | chunk: 500\n#&gt; input opt.  : select: xyz | filter: -drop_z_below 0 -drop_z_above 50 -keep_first\n#&gt; output opt. : in memory | w2w guaranteed | merging enabled\n#&gt; drivers     :\n#&gt;  - Raster : no parameter\n#&gt;  - stars : NA_value = -999999  \n#&gt;  - Spatial : overwrite = FALSE  \n#&gt;  - SpatRaster : overwrite = FALSE  NAflag = -999999  \n#&gt;  - SpatVector : overwrite = FALSE  \n#&gt;  - LAS : no parameter\n#&gt;  - sf : quiet = TRUE  \n#&gt;  - data.frame : no parameter"
  },
  {
    "objectID": "05_engine.html#single-core-processing",
    "href": "05_engine.html#single-core-processing",
    "title": "LAScatalog",
    "section": "Single core processing",
    "text": "Single core processing\nWe perform tree detection using a single core.\n\n# Process on single core\nfuture::plan(sequential)\n\n# Detect trees\nttops &lt;- locate_trees(las = ctg, algorithm = lmf(ws = 3, hmin = 5))\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 22s     \n[====&gt;                                             ] 8% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 29s     \n                                                                                \nChunk 2 of 9 (22.2%): state ✓\n#&gt; \n[==&gt;                                               ] 4% ETA: 41s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 36s     \n[===&gt;                                              ] 6% ETA: 38s     \n                                                                                \nChunk 3 of 9 (33.3%): state ✓\n#&gt; \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 7% ETA: 31s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 9% ETA: 26s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[=====&gt;                                            ] 10% ETA: 24s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 5% ETA: 40s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 44s     \n[==&gt;                                               ] 5% ETA: 45s     \n[==&gt;                                               ] 5% ETA: 47s     \n[==&gt;                                               ] 5% ETA: 53s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=&gt;                                                ] 2% ETA: 88s     \n[=&gt;                                                ] 2% ETA: 88s     \n[=&gt;                                                ] 2% ETA: 87s     \n[=&gt;                                                ] 2% ETA: 87s     \n[=&gt;                                                ] 2% ETA: 86s     \n[=&gt;                                                ] 2% ETA: 85s     \n[=&gt;                                                ] 2% ETA: 85s     \n[=&gt;                                                ] 2% ETA: 84s     \n[=&gt;                                                ] 2% ETA: 83s     \n[=&gt;                                                ] 2% ETA: 83s     \n[=&gt;                                                ] 2% ETA: 82s     \n[=&gt;                                                ] 2% ETA: 82s     \n[=&gt;                                                ] 2% ETA: 81s     \n[=&gt;                                                ] 2% ETA: 81s     \n[=&gt;                                                ] 2% ETA: 80s     \n[=&gt;                                                ] 2% ETA: 80s     \n[=&gt;                                                ] 2% ETA: 80s     \n[=&gt;                                                ] 2% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 83s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[=&gt;                                                ] 2% ETA: 68s     \n[=&gt;                                                ] 2% ETA: 67s     \n[=&gt;                                                ] 2% ETA: 66s     \n[=&gt;                                                ] 3% ETA: 65s     \n[=&gt;                                                ] 3% ETA: 64s     \n[=&gt;                                                ] 3% ETA: 64s     \n[=&gt;                                                ] 3% ETA: 63s     \n[=&gt;                                                ] 3% ETA: 62s     \n[=&gt;                                                ] 3% ETA: 62s     \n[=&gt;                                                ] 3% ETA: 61s     \n[=&gt;                                                ] 3% ETA: 61s     \n[=&gt;                                                ] 3% ETA: 60s     \n[=&gt;                                                ] 3% ETA: 60s     \n[=&gt;                                                ] 3% ETA: 59s     \n[=&gt;                                                ] 3% ETA: 59s     \n[=&gt;                                                ] 3% ETA: 58s     \n[=&gt;                                                ] 3% ETA: 58s     \n[=&gt;                                                ] 3% ETA: 58s     \n[==&gt;                                               ] 4% ETA: 57s     \n[==&gt;                                               ] 4% ETA: 57s     \n[==&gt;                                               ] 4% ETA: 56s     \n[==&gt;                                               ] 4% ETA: 56s     \n[==&gt;                                               ] 4% ETA: 56s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 5% ETA: 53s     \n[==&gt;                                               ] 5% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 53s     \n[==&gt;                                               ] 5% ETA: 53s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 15s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 22s     \n[====&gt;                                             ] 9% ETA: 23s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s"
  },
  {
    "objectID": "05_engine.html#parallel-processing",
    "href": "05_engine.html#parallel-processing",
    "title": "LAScatalog",
    "section": "Parallel processing",
    "text": "Parallel processing\nWe perform tree detection using multiple cores in parallel.\n\n# Process multi-core with three workers each proccessing a tile\nfuture::plan(multisession, workers = 3L)\n\n# Detect trees\nttops &lt;- locate_trees(las = ctg, algorithm = lmf(ws = 3, hmin = 5))\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 9 (11.1%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 28s     \n                                                                                \n#&gt; Chunk 2 of 9 (22.2%): state ✓\n#&gt; \n[==&gt;                                               ] 4% ETA: 41s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 40s     \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 37s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 36s     \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 35s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 34s     \n[===&gt;                                              ] 6% ETA: 36s     \n[===&gt;                                              ] 6% ETA: 38s     \n                                                                                \n#&gt; Chunk 3 of 9 (33.3%): state ✓\n#&gt; \n[==&gt;                                               ] 5% ETA: 35s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 34s     \n[==&gt;                                               ] 5% ETA: 33s     \n[==&gt;                                               ] 5% ETA: 33s     \n[==&gt;                                               ] 5% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 33s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 32s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 6% ETA: 31s     \n[===&gt;                                              ] 6% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 30s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 29s     \n[===&gt;                                              ] 7% ETA: 28s     \n[===&gt;                                              ] 7% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 28s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 27s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 8% ETA: 26s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 25s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 24s     \n[====&gt;                                             ] 9% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 23s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 22s     \n[=====&gt;                                            ] 10% ETA: 23s     \n                                                                                \nChunk 4 of 9 (44.4%): state ✓\n#&gt; \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 4% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 39s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 38s     \n[==&gt;                                               ] 5% ETA: 43s     \n[==&gt;                                               ] 5% ETA: 45s     \n[==&gt;                                               ] 5% ETA: 46s     \n[==&gt;                                               ] 5% ETA: 52s     \n                                                                                \nChunk 5 of 9 (55.6%): state ✓\n#&gt; \n[=&gt;                                                ] 2% ETA: 88s     \n[=&gt;                                                ] 2% ETA: 87s     \n[=&gt;                                                ] 2% ETA: 87s     \n[=&gt;                                                ] 2% ETA: 86s     \n[=&gt;                                                ] 2% ETA: 86s     \n[=&gt;                                                ] 2% ETA: 85s     \n[=&gt;                                                ] 2% ETA: 84s     \n[=&gt;                                                ] 2% ETA: 84s     \n[=&gt;                                                ] 2% ETA: 83s     \n[=&gt;                                                ] 2% ETA: 83s     \n[=&gt;                                                ] 2% ETA: 82s     \n[=&gt;                                                ] 2% ETA: 81s     \n[=&gt;                                                ] 2% ETA: 81s     \n[=&gt;                                                ] 2% ETA: 81s     \n[=&gt;                                                ] 2% ETA: 80s     \n[=&gt;                                                ] 2% ETA: 80s     \n[=&gt;                                                ] 2% ETA: 79s     \n[=&gt;                                                ] 2% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 78s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 75s     \n[=&gt;                                                ] 3% ETA: 76s     \n[=&gt;                                                ] 3% ETA: 77s     \n[=&gt;                                                ] 3% ETA: 79s     \n[=&gt;                                                ] 3% ETA: 83s     \n                                                                                \nChunk 6 of 9 (66.7%): state ✓\n#&gt; \n[=&gt;                                                ] 2% ETA: 66s     \n[=&gt;                                                ] 2% ETA: 65s     \n[=&gt;                                                ] 3% ETA: 64s     \n[=&gt;                                                ] 3% ETA: 63s     \n[=&gt;                                                ] 3% ETA: 62s     \n[=&gt;                                                ] 3% ETA: 62s     \n[=&gt;                                                ] 3% ETA: 61s     \n[=&gt;                                                ] 3% ETA: 61s     \n[=&gt;                                                ] 3% ETA: 60s     \n[=&gt;                                                ] 3% ETA: 60s     \n[=&gt;                                                ] 3% ETA: 59s     \n[=&gt;                                                ] 3% ETA: 59s     \n[=&gt;                                                ] 3% ETA: 58s     \n[=&gt;                                                ] 3% ETA: 58s     \n[=&gt;                                                ] 3% ETA: 57s     \n[=&gt;                                                ] 3% ETA: 57s     \n[=&gt;                                                ] 3% ETA: 57s     \n[==&gt;                                               ] 4% ETA: 56s     \n[==&gt;                                               ] 4% ETA: 56s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 55s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 54s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 4% ETA: 53s     \n[==&gt;                                               ] 4% ETA: 52s     \n[==&gt;                                               ] 4% ETA: 52s     \n[==&gt;                                               ] 4% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 51s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 50s     \n[==&gt;                                               ] 5% ETA: 49s     \n[==&gt;                                               ] 5% ETA: 49s     \n[==&gt;                                               ] 5% ETA: 52s     \n[==&gt;                                               ] 5% ETA: 52s     \n                                                                                \nChunk 7 of 9 (77.8%): state ✓\n#&gt; \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 14s     \n[======&gt;                                           ] 12% ETA: 15s     \n                                                                                \nChunk 8 of 9 (88.9%): state ✓\n#&gt; \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 8% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 21s     \n[====&gt;                                             ] 9% ETA: 23s     \n[====&gt;                                             ] 9% ETA: 23s     \n                                                                                \nChunk 9 of 9 (100%): state ✓\n#&gt; \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[=====&gt;                                            ] 11% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s     \n[======&gt;                                           ] 12% ETA: 15s"
  },
  {
    "objectID": "05_engine.html#revert-to-single-core",
    "href": "05_engine.html#revert-to-single-core",
    "title": "LAScatalog",
    "section": "Revert to single core",
    "text": "Revert to single core\nWe revert to single core processing using future::plan(sequential).\n\n# Back to single core\nfuture::plan(sequential)"
  },
  {
    "objectID": "05_engine.html#conclusion",
    "href": "05_engine.html#conclusion",
    "title": "LAScatalog",
    "section": "Conclusion",
    "text": "Conclusion\nThis concludes the tutorial on basic usage, catalog validation, indexing, CHM generation, ABA estimation, data clipping, ITD using catalog, and parallel computing using the lidR package in R. LIAM FIX"
  },
  {
    "objectID": "05_engine.html#exercises-and-questions",
    "href": "05_engine.html#exercises-and-questions",
    "title": "LAScatalog",
    "section": "Exercises and Questions",
    "text": "Exercises and Questions\n\n\n\n\n\n\nTip\n\n\n\nThis exercise is complex because it involves options not yet described. Be sure to use the lidRbook and package documentation.\n\n\nUsing:\nctg &lt;- readLAScatalog(folder = \"data/Farm_A/\")\n\nE1.\nGenerate a raster of point density for the provided catalog. Hint: Look through the documentation for a function that will do this!\n\n\nE2.\n\n\nE3."
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html",
    "href": "LPS_lidR_LiDAR_Intro.html",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "",
    "text": "Light Detection and Ranging (lidar)\nThe lidR package - a brief introduction\nWorkshop overview"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#overview",
    "href": "LPS_lidR_LiDAR_Intro.html#overview",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "",
    "text": "Light Detection and Ranging (lidar)\nThe lidR package - a brief introduction\nWorkshop overview"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#what-is-lidar",
    "href": "LPS_lidR_LiDAR_Intro.html#what-is-lidar",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "What is LiDAR?",
    "text": "What is LiDAR?\n\nLight Detection and Ranging\nActive form of remote sensing\nMeasures distance to target surfaces with millions of narrow light pulses\nAirborne laser scanning performs lidar systematically from aircraft or drones"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#lidar-data---point-clouds",
    "href": "LPS_lidR_LiDAR_Intro.html#lidar-data---point-clouds",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "LiDAR Data - Point Clouds",
    "text": "LiDAR Data - Point Clouds\n\nDiscrete returns are aggregated as points in point clouds (LAS/LAZ)\nThese datasets contain geo-referenced points with three-dimensional (XYZ) coordinates, and other attributes; intensity, return number etc…\nPoint clouds can be processed into summaries of vegetation structure with lidR\n\n[]\n\nAs with many remote sensing data analyses tasks we are seeking to produce information from simplification to pull a signal of interest (in this case variability in vegetation structure) out of our dataset (a dense point cloud of three-dimensional coordinates that characterize the vegetation)\nTo do so we often generate summary metrics that act similarly to spectral indices in passive optical remote sensing, they ratio or generate statistics on the distribution of points (max, mean height, canopy cover, percentiles, leaf-area density profiles)"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#lidr",
    "href": "LPS_lidR_LiDAR_Intro.html#lidr",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "lidR",
    "text": "lidR\n\nPackage for manipulating and visualizing ALS data\nFocused on forestry and ecological applications but broadly applicable beyond\nWritten entirely open source within R-geospatial ecosystem (terra/sf)\nRuns efficiently with backend C++ code to perform processing"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#workshop-outline",
    "href": "LPS_lidR_LiDAR_Intro.html#workshop-outline",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Workshop Outline",
    "text": "Workshop Outline\n\nIntroduction to Lidar and lidR (09:00)\nReading LAS and LAZ files (09:10)\nPoint Classification and filtering (9:15)\nDigital Terrain Models and Height Normalization (9:25)\nCanopy Height Models (9:35)\nLidar Summary Metrics (9:50)\nFile Collection Processing Engine (10:10)"
  },
  {
    "objectID": "LPS_lidR_LiDAR_Intro.html#get-set-up",
    "href": "LPS_lidR_LiDAR_Intro.html#get-set-up",
    "title": "lidR: (A workshop for) Airborne LiDAR Data Manipulation and Visualization for Environmental Applications",
    "section": "Get Set Up!",
    "text": "Get Set Up!"
  },
  {
    "objectID": "supplemental/S1_roi.html",
    "href": "supplemental/S1_roi.html",
    "title": "Regions of Interest",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "supplemental/S1_roi.html#relevant-resources",
    "href": "supplemental/S1_roi.html#relevant-resources",
    "title": "Regions of Interest",
    "section": "",
    "text": "Code\nlidRbook section"
  },
  {
    "objectID": "supplemental/S1_roi.html#overview",
    "href": "supplemental/S1_roi.html#overview",
    "title": "Regions of Interest",
    "section": "Overview",
    "text": "Overview\nWe demonstrate the selection of regions of interest (ROIs) from LiDAR data. Geometries like circles and rectangles are selected based on coordinates. Complex geometries are extracted from shapefiles to clip specific areas."
  },
  {
    "objectID": "supplemental/S1_roi.html#environment",
    "href": "supplemental/S1_roi.html#environment",
    "title": "Regions of Interest",
    "section": "Environment",
    "text": "Environment\n\n# Clear environment\nrm(list = ls(globalenv()))\n\n# Load packages\nlibrary(lidR)\nlibrary(sf)"
  },
  {
    "objectID": "supplemental/S1_roi.html#simple-geometries",
    "href": "supplemental/S1_roi.html#simple-geometries",
    "title": "Regions of Interest",
    "section": "Simple Geometries",
    "text": "Simple Geometries\n\nLoad LiDAR Data and Inspect\nWe start by loading some LiDAR data and inspecting its header and number of point records.\n\nlas &lt;- readLAS(files = \"data/MixedEucaNat_normalized.laz\", filter = \"-set_withheld_flag 0\")\nlas &lt;- readLAS(files = 'data/zrh_norm.laz')\n# Inspect the header and the number of point records\nlas@header\n#&gt; File signature:           LASF \n#&gt; File source ID:           0 \n#&gt; Global encoding:\n#&gt;  - GPS Time Type: GPS Week Time \n#&gt;  - Synthetic Return Numbers: no \n#&gt;  - Well Know Text: CRS is GeoTIFF \n#&gt;  - Aggregate Model: false \n#&gt; Project ID - GUID:        00000000-0000-0000-5053-004d00000000 \n#&gt; Version:                  1.1\n#&gt; System identifier:         \n#&gt; Generating software:      rlas R package \n#&gt; File creation d/y:        0/0\n#&gt; header size:              227 \n#&gt; Offset to point data:     305 \n#&gt; Num. var. length record:  1 \n#&gt; Point data format:        1 \n#&gt; Point data record length: 28 \n#&gt; Num. of point records:    1270080 \n#&gt; Num. of points by return: 471651 342346 241371 135987 56797 \n#&gt; Scale factor X Y Z:       0.01 0.01 0.01 \n#&gt; Offset X Y Z:             0 0 0 \n#&gt; min X Y Z:                2670505 1258734 -0.88 \n#&gt; max X Y Z:                2670755 1258984 48.31 \n#&gt; Variable Length Records (VLR):\n#&gt;    Variable Length Record 1 of 1 \n#&gt;        Description: by LAStools of rapidlasso GmbH \n#&gt;        Tags:\n#&gt;           Key 1024 value 1 \n#&gt;           Key 3072 value 2056 \n#&gt; Extended Variable Length Records (EVLR):  void\nlas@header$`Number of point records`\n#&gt; [1] 1270080\n\n\n\nSelect Circular and Rectangular Areas\nWe can select circular and rectangular areas from the LiDAR data based on specified coordinates and radii or dimensions.\n\n# Establish coordinates\nx &lt;- 2670592\ny &lt;- 1258890\n\n# Select a circular area\ncircle &lt;- clip_circle(las = las, xcenter = x, ycenter = y, radius = 30)\n\n# Inspect the circular area and the number of point records\ncircle\n#&gt; class        : LAS (v1.1 format 1)\n#&gt; memory       : 3.1 Mb \n#&gt; extent       : 2670562, 2670622, 1258860, 1258920 (xmin, xmax, ymin, ymax)\n#&gt; coord. ref.  : CH1903+ / LV95 \n#&gt; area         : 2903 m²\n#&gt; points       : 58.4 thousand points\n#&gt; type         : airborne\n#&gt; density      : 20.13 points/m²\n#&gt; density      : 7.55 pulses/m²\ncircle@header$`Number of point records`\n#&gt; [1] 58447\n\n# Plot the circular area\nplot(circle)\n\n\n\n\n\n\n\n\n\nWe can do the same with a rectangular area by defining corner coordinates.\n\n# Select a rectangular area\nrect &lt;- clip_rectangle(las = las, xleft = x, ybottom = y, xright = x + 40, ytop = y + 30)\n\n# Plot the rectangular area\nplot(rect)\n\n\n\n\n\n\n\n\n\nWe can also supply multiple coordinate pairs to clip multiple ROIs.\n\n# Select multiple random circular areas\nx &lt;- runif(2, x, x)\ny &lt;- runif(2, 1258840, 1258890)\n\nplots &lt;- clip_circle(las = las, xcenter = x, ycenter = y, radius = 10)\n\n# Plot each of the multiple circular areas\nplot(plots[[1]])\n\n\n\n\n\n\n\n\n\n# Plot each of the multiple circular areas\nplot(plots[[2]])"
  },
  {
    "objectID": "supplemental/S1_roi.html#extraction-of-complex-geometries-from-shapefiles",
    "href": "supplemental/S1_roi.html#extraction-of-complex-geometries-from-shapefiles",
    "title": "Regions of Interest",
    "section": "Extraction of Complex Geometries from Shapefiles",
    "text": "Extraction of Complex Geometries from Shapefiles\nWe demonstrate how to extract complex geometries from shapefiles using the clip_roi() function from the lidR package.\nWe use the sf package to load an ROI and then clip to its extents.\n\n# Load the shapefile using sf\nstand_bdy &lt;- sf::st_read(dsn = \"data/roi/roi.gpkg\", quiet = TRUE)\n\n# Plot the LiDAR header information without the map\nplot(las@header, map = FALSE)\n\n# Plot the stand boundary areas on top of the LiDAR header plot\nplot(stand_bdy, add = TRUE, col = \"#08B5FF39\")\n\n\n\n\n\n\n\n\n# Extract points within the stand boundary using clip_roi()\nstand &lt;- clip_roi(las = las, geometry = stand_bdy)\n\n# Plot the extracted points within the planting areas\nplot(stand)"
  },
  {
    "objectID": "supplemental/S1_roi.html#clipping-rois-with-a-catalog",
    "href": "supplemental/S1_roi.html#clipping-rois-with-a-catalog",
    "title": "Regions of Interest",
    "section": "Clipping ROIs with a catalog",
    "text": "Clipping ROIs with a catalog\nWe clip the LAS data in the catalog using specified coordinate groups.\n\n\nctg &lt;- catalog(\"data/ctg_norm\")\n\n# Set coordinate groups\nx &lt;- c(2670578, 2671234, 2671499, 2671755, 2671122)\ny &lt;- c(1258601, 1259050, 1259450, 1259900, 1258750)\n\n# Visualize coordinate groups\nplot(ctg)\npoints(x, y)\n\n\n\n\n\n\n\n\n# Clip plots\nrois &lt;- clip_circle(las = ctg, xcenter = x, ycenter = y, radius = 30)\n\nplot(rois[[1]])\n\n\n\n\n\n\n\n\n\nplot(rois[[3]])"
  },
  {
    "objectID": "supplemental/S1_roi.html#validate-clipped-data",
    "href": "supplemental/S1_roi.html#validate-clipped-data",
    "title": "Regions of Interest",
    "section": "Validate clipped data",
    "text": "Validate clipped data\nWe validate the clipped LAS data using the las_check function.\n\nlas_check(rois[[1]])\n#&gt; \n#&gt;  Checking the data\n#&gt;   - Checking coordinates... ✓\n#&gt;   - Checking coordinates type... ✓\n#&gt;   - Checking coordinates range... ✓\n#&gt;   - Checking coordinates quantization... ✓\n#&gt;   - Checking attributes type... ✓\n#&gt;   - Checking ReturnNumber validity... ✓\n#&gt;   - Checking NumberOfReturns validity... ✓\n#&gt;   - Checking ReturnNumber vs. NumberOfReturns... ✓\n#&gt;   - Checking RGB validity... ✓\n#&gt;   - Checking absence of NAs... ✓\n#&gt;   - Checking duplicated points... ✓\n#&gt;   - Checking degenerated ground points... ✓\n#&gt;   - Checking attribute population...\n#&gt;     🛈 'ScanDirectionFlag' attribute is not populated\n#&gt;     🛈 'EdgeOfFlightline' attribute is not populated\n#&gt;   - Checking gpstime incoherances\n#&gt;     ✗ 4 pulses (points with the same gpstime) have points with identical ReturnNumber\n#&gt;   - Checking flag attributes... ✓\n#&gt;   - Checking user data attribute... ✓\n#&gt;  Checking the header\n#&gt;   - Checking header completeness... ✓\n#&gt;   - Checking scale factor validity... ✓\n#&gt;   - Checking point data format ID validity... ✓\n#&gt;   - Checking extra bytes attributes validity... ✓\n#&gt;   - Checking the bounding box validity... ✓\n#&gt;   - Checking coordinate reference system... ✓\n#&gt;  Checking header vs data adequacy\n#&gt;   - Checking attributes vs. point format... ✓\n#&gt;   - Checking header bbox vs. actual content... ✓\n#&gt;   - Checking header number of points vs. actual content... ✓\n#&gt;   - Checking header return number vs. actual content... ✓\n#&gt;  Checking coordinate reference system...\n#&gt;   - Checking if the CRS was understood by R... ✓\n#&gt;  Checking preprocessing already done \n#&gt;   - Checking ground classification... yes\n#&gt;   - Checking normalization... yes\n#&gt;   - Checking negative outliers...\n#&gt;     ⚠ 14 points below 0\n#&gt;   - Checking flightline classification... yes\n#&gt;  Checking compression\n#&gt;   - Checking attribute compression...\n#&gt;    -  ScanDirectionFlag is compressed\n#&gt;    -  EdgeOfFlightline is compressed\n#&gt;    -  Synthetic_flag is compressed\n#&gt;    -  Keypoint_flag is compressed\n#&gt;    -  Withheld_flag is compressed\n#&gt;    -  UserData is compressed\nlas_check(rois[[3]])\n#&gt; \n#&gt;  Checking the data\n#&gt;   - Checking coordinates... ✓\n#&gt;   - Checking coordinates type... ✓\n#&gt;   - Checking coordinates range... ✓\n#&gt;   - Checking coordinates quantization... ✓\n#&gt;   - Checking attributes type... ✓\n#&gt;   - Checking ReturnNumber validity... ✓\n#&gt;   - Checking NumberOfReturns validity... ✓\n#&gt;   - Checking ReturnNumber vs. NumberOfReturns... ✓\n#&gt;   - Checking RGB validity... ✓\n#&gt;   - Checking absence of NAs... ✓\n#&gt;   - Checking duplicated points... ✓\n#&gt;   - Checking degenerated ground points... ✓\n#&gt;   - Checking attribute population...\n#&gt;     🛈 'ScanDirectionFlag' attribute is not populated\n#&gt;     🛈 'EdgeOfFlightline' attribute is not populated\n#&gt;   - Checking gpstime incoherances\n#&gt;     ✗ 26 pulses (points with the same gpstime) have points with identical ReturnNumber\n#&gt;   - Checking flag attributes... ✓\n#&gt;   - Checking user data attribute... ✓\n#&gt;  Checking the header\n#&gt;   - Checking header completeness... ✓\n#&gt;   - Checking scale factor validity... ✓\n#&gt;   - Checking point data format ID validity... ✓\n#&gt;   - Checking extra bytes attributes validity... ✓\n#&gt;   - Checking the bounding box validity... ✓\n#&gt;   - Checking coordinate reference system... ✓\n#&gt;  Checking header vs data adequacy\n#&gt;   - Checking attributes vs. point format... ✓\n#&gt;   - Checking header bbox vs. actual content... ✓\n#&gt;   - Checking header number of points vs. actual content... ✓\n#&gt;   - Checking header return number vs. actual content... ✓\n#&gt;  Checking coordinate reference system...\n#&gt;   - Checking if the CRS was understood by R... ✓\n#&gt;  Checking preprocessing already done \n#&gt;   - Checking ground classification... yes\n#&gt;   - Checking normalization... yes\n#&gt;   - Checking negative outliers...\n#&gt;     ⚠ 12 points below 0\n#&gt;   - Checking flightline classification... yes\n#&gt;  Checking compression\n#&gt;   - Checking attribute compression...\n#&gt;    -  ScanDirectionFlag is compressed\n#&gt;    -  EdgeOfFlightline is compressed\n#&gt;    -  Synthetic_flag is compressed\n#&gt;    -  Keypoint_flag is compressed\n#&gt;    -  Withheld_flag is compressed\n#&gt;    -  UserData is compressed"
  },
  {
    "objectID": "supplemental/S1_roi.html#independent-files-e.g.-plots-as-catalogs",
    "href": "supplemental/S1_roi.html#independent-files-e.g.-plots-as-catalogs",
    "title": "Regions of Interest",
    "section": "Independent files (e.g. plots) as catalogs",
    "text": "Independent files (e.g. plots) as catalogs\nWe read an individual LAS file as a catalog and perform operations on it.\n\n# Read single file as catalog\nctg &lt;- readLAScatalog(folder = \"data/zrh_norm.laz\")\n\n# Set options for output files\nopt_output_files(ctg) &lt;- paste0(tempdir(),\"/{XCENTER}_{XCENTER}\")\n\n# Write file as .laz\nopt_laz_compression(ctg) &lt;- TRUE\n\n# Get random plot locations and clip\nx &lt;- runif(n = 4, min = ctg$Min.X, max = ctg$Max.X)\ny &lt;- runif(n = 4, min = ctg$Min.Y, max = ctg$Max.Y)\nrois &lt;- clip_circle(las = ctg, xcenter = x, ycenter = y, radius = 10)\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 4 (25%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 4 (50%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 4 (75%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 4 (100%): state ✓\n#&gt; \n                                                                                \n\n\n# Read catalog of plots\nctg_plots &lt;- readLAScatalog(tempdir())\n\n# Set independent files option\nopt_independent_files(ctg_plots) &lt;- TRUE\nopt_output_files(ctg_plots) &lt;- paste0(tempdir(),\"/{XCENTER}_{XCENTER}\")\n\n# Generate plot-level terrain models\nrasterize_terrain(las = ctg_plots, res = 1, algorithm = tin())\n\n\n\n\n\n\n\n#&gt; Chunk 1 of 4 (25%): state ✓\n#&gt; \n                                                                                \nChunk 2 of 4 (50%): state ✓\n#&gt; \n                                                                                \nChunk 3 of 4 (75%): state ✓\n#&gt; \n                                                                                \nChunk 4 of 4 (100%): state ✓\n#&gt; \n                                                                                \n#&gt; class       : SpatRaster \n#&gt; size        : 158, 147, 1  (nrow, ncol, nlyr)\n#&gt; resolution  : 1, 1  (x, y)\n#&gt; extent      : 2670578, 2670725, 1258759, 1258917  (xmin, xmax, ymin, ymax)\n#&gt; coord. ref. : CH1903+ / LV95 (EPSG:2056) \n#&gt; source      : rasterize_terrain.vrt \n#&gt; name        : Z \n#&gt; min value   : 0 \n#&gt; max value   : 0\n\n\n# Check files\npath &lt;- paste0(tempdir())\nfile_list &lt;- list.files(path, full.names = TRUE)\nfile &lt;- file_list[grep(\"\\\\.tif$\", file_list)][[1]]\n\n# plot dtm\nplot(terra::rast(file))"
  },
  {
    "objectID": "supplemental/S1_roi.html#conclusion",
    "href": "supplemental/S1_roi.html#conclusion",
    "title": "Regions of Interest",
    "section": "Conclusion",
    "text": "Conclusion\nThis concludes our tutorial on selecting simple geometries and extracting complex geometries from geopackage files (or shapefiles etc…) using the lidR package in R."
  }
]